{"version":3,"file":"pbf.min.js","sources":["../src/js/pbf.js"],"names":["global","$","toggleSearchVideos","e","target","closest","find","toggle","disableEnter","which","click","syncOrderNumbers","attr","fieldsElem","each","FieldIndex","VideoField","VideoIndex","VideoItem","this","replace","removeClass","addClass","delVideo","VideoID","data","get","ChannelVideos","ACT_URL","video_id","ajax_method","fadeOut","remove","clearVideoSearch","jQuery","TargetBox","empty","searchForVideos","preventDefault","params","customField","videoServices","fields","services","val","i","length","show","siblings","youtubeSearchVideos","vimeoSearchVideos","addVideoResults","service","items","html","id","img_url","title","vid_url","hide","colorbox","iframe","width","height","submitVideoUrl","videoUrl","prompt","youtubeSubmitUrl","vimeoSubmitUrl","addVideoToTable","video","field_id","field_data","service_video_id","slideUp","video_date","Date","setTime","layout","video_url","video_img_url","video_title","video_author","video_duration","toFixed","video_views","toDateString","field_name","JSON","stringify","append","addVideo","Parent","Params","split","field_layout","youtubeGetVideo","vimeoGetVideo","author","keywords","ajax","crossDomain","dataType","type","url","q","maxResults","limit","part","key","youtubeKey","success","rdata","videos","videoID","videoId","push","snippet","parts","servicebox","inner","loading","indexOf","parseUrl","getQueryVariable","query","pageInfo","totalResults","callback","entry","video_desc","description","video_username","channelTitle","video_author_id","nezasa","iso8601","Period","parseToTotalSeconds","contentDetails","duration","publishedAt","getTime","statistics","viewCount","thumb","urlparams","format","method","user_id","per_page","full_response","vimeoGetTheSignedUrl","param","jsonp","jsonpCallback","cache","stat","on_this_page","Videos","ii","thumbnails","thumbnail","_content","Video","owner","username","display_name","number_of_plays","upload_date","recvd_resp","oauth","OAuthSimple","oauthObject","sign","path","parameters","signatures","api_key","vimeoConsumerKey","shared_secret","vimeoSharedSecret","signed_url","alert","str","component","ini","mode","local_value","parser","php","strict","loose","m","exec","uri","toLowerCase","name","$0","$1","$2","source","variable","vars","pair","decodeURIComponent","Init","elem","parse","keypress","delegate","sortable","cursor","opacity","handle","update","helper","event","ui","children","forcePlaceholderSize","start","placeholder","consumer_key","_secrets","_default_signature_method","_action","_nonce_chars","setParameters","_parseParameterString","_parameters","_getNonce","_getTimestamp","setSignatureMethod","_getApiKey","_getAccessToken","setQueryString","setURL","select","_path","setPath","setAction","action","toUpperCase","match","setTokensAndSecrets","oauth_token","access_token","oauth_secret","access_secret","args","normParams","_normalizedParameters","sig","_generateSignature","signature","sig_string","_oauthEscape","header","getHeaderString","result","pName","Array","pLength","j","paramString","elements","element","shift","value","keyToken","string","encodeURIComponent","cLength","rnum","Math","floor","random","substring","oauth_consumer_key","d","ts","paramNames","ra","paramName","unshift","sort","pLen","sorted","spLen","join","b64_hmac_sha1","k","_p","_z","_f","t","b","c","_k","_s","x","y","l","_r","n","_c","w","a","o","p","r","s","_b","charCodeAt","_h","h","concat","_n","charAt","_x","secretKey","sigString","window","parsePeriodString","period","_distributeOverflow","struct","distributeOverflow","valueIndexes","overflowLimits","Error","structIndex","version","multiplicators","durationPerUnit","durationInSeconds","isValid","parseToString","unitNames","unitNamesPlural","trim","document","ready"],"mappings":"CAAE,SAASA,EAAQC,GAEf,YAkDA,SAASC,GAAmBC,GAExB,MADAF,GAAEE,EAAEC,QAAQC,QAAQ,YAAYC,KAAK,gBAAgBC,UAC9C,EAKX,QAASC,GAAaL,GAClB,MAAe,KAAXA,EAAEM,OACFR,EAAEE,EAAEC,QAAQC,QAAQ,YAAYC,KAAK,iBAAiBI,SAC/C,GAFX,OAQJ,QAASC,KACL,GAAIC,EAGJC,GAAWC,KAAK,SAASC,EAAYC,GAIjCf,EAAEe,GAAYV,KAAK,WAAWQ,KAAK,SAASG,EAAYC,GAGpDjB,EAAEiB,GAAWZ,KAAK,2BAA2BQ,KAAK,WAC9CF,EAAOX,EAAEkB,MAAMP,KAAK,QAAQQ,QAAQ,oBAAqB,aAAeH,EAAW,GAAK,KACxFhB,EAAEkB,MAAMP,KAAK,OAAQA,OAK7BX,EAAEe,GAAYV,KAAK,WAAWe,YAAY,OAC1CpB,EAAEe,GAAYV,KAAK,eAAegB,SAAS,SAOnD,QAASC,GAASpB,GAEd,GAAIqB,GAAUvB,EAAEE,EAAEC,QAAQqB,KAAK,KAG3BD,IACAvB,EAAEyB,IAAIC,cAAcC,SAAUC,SAAUL,EAASM,YAAa,gBAAiB,cAKnF7B,EAAEE,EAAEC,QAAQC,QAAQ,WAAW0B,QAAQ,OAAQ,WAC3C9B,EAAEkB,MAAMa,SAAUrB,MAO1B,QAASsB,GAAiB9B,GAEJ+B,OAAO/B,EAAEC,QAAQC,QAAQ,WAI3C,OAFA8B,WAAU7B,KAAK,yBAAyB8B,SAEjC,EAKX,QAASC,GAAgBlC,GACrBA,EAAEmC,gBAEF,IACIC,MACAC,EAAcvC,EAAEE,EAAEC,QAAQC,QAAQ,YAClCoC,EAAgBC,EAAO,SAASF,EAAYf,KAAK,aAAakB,QAGlEH,GAAYlC,KAAK,wBAAwBA,KAAK,wCAAwCQ,KAAK,WACvFyB,EAAOtC,EAAEkB,MAAMP,KAAK,QAAUsB,OAAOf,MAAMyB,OAG/C,KAAK,GAAIC,GAAI,EAAGA,EAAIJ,EAAcK,OAAQD,IACtCL,EAAYlC,KAAK,2BAA2BmC,EAAcI,IAAIE,OAAOzC,KAAK,kBAAkByC,OAAOC,SAAS,UAAUZ,QAE9F,WAApBK,EAAcI,GACdI,EAAoBV,EAAQC,GAE5BU,EAAkBX,EAAQC,GAOtC,QAASW,GAAgBC,EAASC,EAAOb,GACrC,GACIc,GAAO,EAEU,KAAjBD,EAAMP,SACNQ,GAAQ,6BAGZ,KAAK,GAAIT,GAAI,EAAGA,EAAIQ,EAAMP,OAAQD,IAC9BS,GAAQ,2BAA2BF,EAAQ,IAAIC,EAAMR,GAAGU,GAAG,SAASH,EAAQ,KAAKC,EAAMR,GAAGU,GAAG,KAC7FD,GAAY,aAAeD,EAAMR,GAAGW,QAAU,iCAC9CF,GAAY,UAAWD,EAAMR,GAAGY,MAAO,WACvCH,GAAY,SACZA,GAAgB,YAAcD,EAAMR,GAAGa,QAAU,4BACjDJ,GAAgB,qCAChBA,GAAY,UACZA,GAAQ,QAGZA,IAAQ,yBAERd,EAAYlC,KAAK,2BAA2B8C,GAAS9C,KAAK,kBAAkBqD,OAAOX,SAAS,UAAUD,OAAOO,KAAKA,GAClHd,EAAYlC,KAAK,+BAA+BsD,UAAUC,QAAO,EAAMC,MAAO,IAAKC,OAAO,MAK9F,QAASC,GAAe7D,GACpB,GAAI8D,GAAWC,OAAO,aAAc,GACpC,IAAiB,OAAbD,EAAmB,OAAO,CAE9B,IAAIzB,GAAcvC,EAAEE,EAAEC,QAAQC,QAAQ,eAClCoC,EAAgBC,EAAO,SAASF,EAAYf,KAAK,aAAakB,QAElEH,GAAYlC,KAAK,gBAAgByC,MAEjC,KAAK,GAAIF,GAAI,EAAGA,EAAIJ,EAAcK,OAAQD,IACtCL,EAAYlC,KAAK,2BAA2BmC,EAAcI,IAAIE,OAAOzC,KAAK,kBAAkByC,OAAOC,SAAS,UAAUZ,QAE9F,WAApBK,EAAcI,GACdsB,EAAiBF,EAAUzB,GAE3B4B,EAAeH,EAAUzB,EAIjC,QAAO,EAKX,QAAS6B,GAAgBC,EAAOC,GAC5B,GAAIC,GAAa9B,EAAO,SAAS6B,GAC7B/B,EAAcvC,EAAE,iBAAiBsE,GACjCjB,EAAO,EAEXd,GAAYlC,KAAK,IAAIgE,EAAMlB,QAAQ,KAAKkB,EAAMG,kBAAkBC,SAEhE,IAAIC,GAAa,GAAIC,KACrBD,GAAWE,QAA2B,IAAjBP,EAAMK,YAEF,SAArBH,EAAWM,QACXxB,GAAQ,sBACRA,GAAY,gBAAgBgB,EAAMS,UAAU,iCAAiCT,EAAMU,cAAc,0CACjG1B,GAAY,OAAOgB,EAAMW,YAAY,QACrC3B,GAAY,OAAOgB,EAAMY,aAAa,QACtC5B,GAAY,QAAQgB,EAAMa,eAAe,IAAIC,QAAQ,GAAG,YACxD9B,GAAY,OAAOgB,EAAMe,YAAY,QACrC/B,GAAY,OAAOqB,EAAWW,eAAe,QAC7ChC,GAAY,OACZA,GAAgB,4DAChBA,GAAgB,0DAA0DgB,EAAMzC,SAAS,eAGrFyB,GADAgB,EAAMzC,SAAW,EACT,gBAAgB2C,EAAWe,WAAW,+CAA+CjB,EAAMzC,SAAS,KAEpG,mBAAmB2C,EAAWe,WAAW,2CAA2CC,KAAKC,UAAUnB,GAAO,cAGtHhB,GAAY,QACZA,GAAQ,UAERA,GAAQ,iCACRA,GAAY,YAAYgB,EAAMS,UAAU,iCAAiCT,EAAMU,cAAc,qCAC7F1B,GAAY,UAAUgB,EAAMW,YAAY,WACxC3B,GAAY,SACZA,GAAgB,4DAChBA,GAAgB,0DAA0DgB,EAAMzC,SAAS,eAGrFyB,GADAgB,EAAMzC,SAAW,EACT,gBAAgB2C,EAAWe,WAAW,+CAA+CjB,EAAMzC,SAAS,KAEpG,mBAAmB2C,EAAWe,WAAW,2CAA2CC,KAAKC,UAAUnB,GAAO,cAEtHhB,GAAY,UACZA,GAAQ,UAGZd,EAAYlC,KAAK,6BAA6BqD,OAC9CnB,EAAYlC,KAAK,mBAAmBoF,OAAOpC,GAC3C3C,IACA6B,EAAYlC,KAAK,sCAAsCsD,UAAUC,QAAO,EAAMC,MAAO,IAAKC,OAAO,MAKrG,QAAS4B,GAASxF,GACd,GAAIyF,GAAS1D,OAAO/B,EAAEC,QAAQC,QAAQ,aAClCmC,EAAcN,OAAO/B,EAAEC,QAAQC,QAAQ,eACvCkE,EAAW/B,EAAYf,KAAK,WAEhCS,QAAO/B,EAAEC,QAAQkB,SAAS,UAE1B,IAAIuE,KAQJ,OAPAA,GAAO/D,YAAc,YACrB+D,EAAOzC,QAAUwC,EAAOhF,KAAK,OAAOkF,MAAM,KAAK,GAC/CD,EAAOhE,SAAW+D,EAAOhF,KAAK,OAAOkF,MAAM,KAAK,GAChDD,EAAOtB,SAAWA,EAClBsB,EAAON,WAAa7C,EAAO,SAAS6B,GAAUgB,WAC9CM,EAAOE,aAAerD,EAAO,SAAS6B,GAAUO,OAE1B,WAAlBe,EAAOzC,SACP4C,EAAgBH,EAAOhE,SAAU0C,EAAUF,IAEpC,IAEP4B,EAAcJ,EAAOhE,SAAU0C,EAAUF,IAGtC,GAKX,QAASpB,GAAoBV,EAAQC,GAG7BD,EAAO2D,SAAQ3D,EAAO4D,UAAY,IAAK5D,EAAO2D,QAElDjG,EAAEmG,MACEC,aAAa,EACbC,SAAU,OAAQC,KAAM,MACxBC,IAAK,+CACL/E,MAAOgF,EAAElE,EAAO4D,SAAUO,WAAWnE,EAAOoE,MAAOJ,KAAK,QAASK,KAAK,UAAWC,IAAIC,GACrFC,QAAS,SAASC,GAGd,IAAK,GAFDC,MAEKpE,EAAI,EAAGA,EAAImE,EAAM3D,MAAMP,OAAQD,IAAK,CACzC,GAAIyB,GAAQ0C,EAAM3D,MAAMR,GACpBqE,EAAU5C,EAAMf,GAAG4D,OAEvBF,GAAOG,MACH7D,GAAI2D,EACJzD,MAAOa,EAAM+C,QAAQ5D,MACrBD,QAAS,0BAA4B0D,EAAU,eAC/CxD,QAAS,iCAAiCwD,IAIlD/D,EAAgB,UAAW8D,EAAQzE,MAO/C,QAAS2B,GAAiBqC,EAAKhE,GAC3B,GAII8E,GAJAC,EAAa/E,EAAYlC,KAAK,mCAAmCyC,OACjEyE,EAAQD,EAAWjH,KAAK,UACxBmH,EAAUF,EAAWjH,KAAK,kBAC1BiD,EAAK,IAGT,OAA+B,KAA3BiD,EAAIkB,QAAQ,YAAiD,KAA5BlB,EAAIkB,QAAQ,aAC7CD,EAAQ9D,WACR6D,GAAMlE,KAAK,oCAKXkD,EAAIkB,QAAQ,qBAAuB,GACnCJ,EAAQK,EAASnB,GACjBjD,EAAKqE,EAAiBN,EAAMO,MAAO,MAI9BrB,EAAIkB,QAAQ,YAAc,GAC/BJ,EAAQd,EAAIV,MAAM,KAClBvC,EAAK+D,EAAOA,EAAMxE,OAAO,IAIpB0D,EAAIkB,QAAQ,qBAAuB,IACxCJ,EAAQd,EAAIV,MAAM,KAClBvC,EAAK+D,EAAOA,EAAMxE,OAAO,IAGlB,OAAPS,GACAkE,EAAQ9D,WACR6D,GAAMlE,KAAK,wDAIfrD,GAAEmG,MACEC,aAAa,EACbC,SAAU,OAAQC,KAAM,MACxBC,IAAK,+CACL/E,MAAO8B,GAAGA,EAAIqD,KAAK,UAAWC,IAAIC,GAClCC,QAAS,SAASC,GACdS,EAAQ9D,QAEsB,mBAAnBqD,GAAMc,UAAkE,SAA/Bd,GAAMc,SAASC,eAC/DP,EAAMlE,KAAK,6CAA6CC,EAAG,QAG/D,IAAIe,GAAQ0C,EAAM3D,MAAM,GACpB8D,EAAU7C,EAAMf,EAEpBJ,GAAgB,YACZI,GAAI4D,EACJ1D,MAAOa,EAAM+C,QAAQ5D,MACrBD,QAAS,0BAA4B2D,EAAU,eAC/CzD,QAAS,iCAAiCyD,IAC1C3E,OAOhB,QAASwD,GAAgBzC,EAAIgB,EAAUyD,GACnC/H,EAAEmG,MACEC,aAAa,EACbC,SAAU,OAAQC,KAAM,MACxBC,IAAK,+CACL/E,MAAO8B,GAAGA,EAAIqD,KAAK,oCAAqCC,IAAIC,GAC5DC,QAAS,SAASC,GACd,GAAIE,GAAU3D,EACVe,KACA2D,EAAQjB,EAAM3D,MAAM,EAExBiB,GAAMlB,QAAU,UAChBkB,EAAMG,iBAAmByC,EACzB5C,EAAMzC,SAAW,EACjByC,EAAMS,UAAY,gCAAkCmC,EACpD5C,EAAMU,cAAgB,yBAA2BkC,EAAU,eAC3D5C,EAAMW,YAAcgD,EAAMZ,QAAQ5D,MAClCa,EAAM4D,WAAaD,EAAMZ,QAAQc,YACjC7D,EAAM8D,eAAiBH,EAAMZ,QAAQgB,aACrC/D,EAAMY,aAAe+C,EAAMZ,QAAQgB,aACnC/D,EAAMgE,gBAAkB,EACxBhE,EAAMa,eAAiBoD,OAAOC,QAAQC,OAAOC,oBAAoBT,EAAMU,eAAeC,UACtFtE,EAAMK,WAAc,GAAIC,MAAKqD,EAAMY,aAAaC,UAAU,IAE1DxE,EAAMe,YAAc,EAGW,mBAApB4C,GAAMc,YAC2B,mBAA9Bd,GAAMc,WAAWC,YAC3B1E,EAAMe,YAAc4C,EAAMc,WAAWC,WAGzChB,EAAS1D,EAAOC,MAO5B,QAASrB,GAAkBX,EAAQC,GAC/B,GAAOyF,GAAOzE,EAASyF,EAEnB1B,EAAa/E,EAAYlC,KAAK,iCAAiCyC,OAC/DyE,EAAQD,EAAWjH,KAAK,UACxBmH,EAAUF,EAAWjH,KAAK,kBAE1B4I,IACJA,GAAUC,OAAS,QACnBD,EAAUE,OAAS,sBACnBF,EAAUrB,MAAQtF,EAAO4D,SACrB5D,EAAO2D,SAAQgD,EAAUG,QAAU9G,EAAO2D,QAC9CgD,EAAUI,SAAW/G,EAAOoE,MAC5BuC,EAAUK,cAAgB,GAC1B,IAAI/C,GAAMgD,EAAqBvJ,EAAEwJ,MAAMP,GAGvCjJ,GAAEmG,MACEC,aAAa,EACbC,SAAU,QACVE,IAAKA,EACLkD,OAAO,EAAOC,cAAe,gBAC7BC,OAAO,EACP7C,QAAS,SAASC,GACd,GAAkB,MAAdA,EAAM6C,KAGN,MAFApC,GAAQ9D,WACR6D,GAAMlE,KAAK,mCAIf,IAAkC,IAA9B0D,EAAMC,OAAO6C,aAGb,MAFArC,GAAQ9D,WACR6D,GAAMlE,KAAK,4BAMf,KAAK,GAFDyG,MAEKlH,EAAI,EAAGA,EAAImE,EAAMC,OAAO3C,MAAMxB,OAAQD,IAAK,CAChDoF,EAAQjB,EAAMC,OAAO3C,MAAMzB,EAE3B,KAAK,GAAImH,GAAK/B,EAAMgC,WAAWC,UAAUpH,OAAS,EAAGkH,GAAM,EAAGA,IAC1Df,EAAQhB,EAAMgC,WAAWC,UAAUF,IAChB,OAAff,EAAMnF,OAAkC,OAAhBmF,EAAMlF,UAC9BP,EAAUyF,EAAMkB,SAIxBJ,GAAO3C,MACH7D,GAAI0E,EAAM1E,GACVE,MAAOwE,EAAMxE,MACbD,QAASA,EACTE,QAAS,iCAAmCuE,EAAM1E,GAAK,iCAK/DJ,EAAgB,QAAS4G,EAAQvH,MAQ7C,QAAS4B,GAAeoC,EAAKhE,GACzB,GAII8E,GAAOW,EAAOgB,EAAOzF,EAJrB+D,EAAa/E,EAAYlC,KAAK,iCAAiCyC,OAC/DyE,EAAQD,EAAWjH,KAAK,UACxBmH,EAAUF,EAAWjH,KAAK,kBAC1BiD,EAAK,IAGT,IAA6B,KAAzBiD,EAAIkB,QAAQ,SAGZ,MAFAD,GAAQ9D,WACR6D,GAAMlE,KAAK,+BAUf,IALIkD,EAAIkB,QAAQ,cAAgB,IAC5BJ,EAAQd,EAAIV,MAAM,KAClBvC,EAAK+D,EAAOA,EAAMxE,OAAO,IAGlB,OAAPS,EAGA,MAFAkE,GAAQ9D,WACR6D,GAAMlE,KAAK,gDAIf,IAAI4F,KACJA,GAAUC,OAAS,QACnBD,EAAUE,OAAS,uBACnBF,EAAUrH,SAAW0B,EACrB2F,EAAUK,cAAgB,IAE1B/C,EAAMgD,EAAqBvJ,EAAEwJ,MAAMP,IAGnCjJ,EAAEmG,MACEC,aAAa,EACbC,SAAU,QACVE,IAAKA,EACLkD,OAAO,EAAOC,cAAe,gBAC7BC,OAAO,EACP7C,QAAS,SAASC,GACd,GAAkB,MAAdA,EAAM6C,KAGN,MAFApC,GAAQ9D,WACR6D,GAAMlE,KAAK,mCAIf,IAA2B,IAAvB0D,EAAM1C,MAAMxB,OAGZ,MAFA2E,GAAQ9D,WACR6D,GAAMlE,KAAK,4BAMf,KAAK,GAFDyG,MAEKlH,EAAI,EAAGA,EAAImE,EAAM1C,MAAMxB,OAAQD,IAAK,CACzCoF,EAAQjB,EAAM1C,MAAMzB,EAEpB,KAAK,GAAImH,GAAK/B,EAAMgC,WAAWC,UAAUpH,OAAS,EAAGkH,GAAM,EAAGA,IAC1Df,EAAQhB,EAAMgC,WAAWC,UAAUF,IAChB,OAAff,EAAMnF,OAAkC,OAAhBmF,EAAMlF,UAC9BP,EAAUyF,EAAMkB,SAIxBJ,GAAO3C,MACH7D,GAAI0E,EAAM1E,GACVE,MAAOwE,EAAMxE,MACbD,QAASA,EACTE,QAAS,iCAAmCuE,EAAM1E,GAAK,iCAK/DJ,EAAgB,QAAS4G,EAAQvH,MAS7C,QAASyD,GAAc1C,EAAIgB,EAAUyD,GACjC,GAAIC,GAAOgB,EAAOzF,EAEd0F,IACJA,GAAUC,OAAS,QACnBD,EAAUE,OAAS,uBACnBF,EAAUrH,SAAW0B,EACrB2F,EAAUK,cAAgB,GAC1B,IAAI/C,GAAMgD,EAAqBvJ,EAAEwJ,MAAMP,GAGvCjJ,GAAEmG,MACEC,aAAa,EACbC,SAAU,QACVE,IAAKA,EACLkD,OAAO,EAAOC,cAAe,gBAC7BC,OAAO,EACP7C,QAAS,SAASC,GACd,GAAkB,MAAdA,EAAM6C,KAGN,MAFApC,SAAQ9D,WACR6D,OAAMlE,KAAK,mCAIf2E,GAAQjB,EAAM1C,MAAM,EAEpB,KAAK,GAAI0F,GAAK/B,EAAMgC,WAAWC,UAAUpH,OAAS,EAAGkH,GAAM,EAAGA,IAC1Df,EAAQhB,EAAMgC,WAAWC,UAAUF,IAChB,OAAff,EAAMnF,OAAkC,OAAhBmF,EAAMlF,UAC9BP,EAAUyF,EAAMkB,SAIxB,IAAIC,KACJA,GAAMhH,QAAU,QAChBgH,EAAM3F,iBAAmBwD,EAAM1E,GAC/B6G,EAAMvI,SAAW,EACjBuI,EAAMrF,UAAY,iCAAmCkD,EAAM1E,GAAK,+BAChE6G,EAAMpF,cAAgBxB,EACtB4G,EAAMnF,YAAcgD,EAAMxE,MAC1B2G,EAAMlC,WAAaD,EAAME,YACzBiC,EAAMhC,eAAiBH,EAAMoC,MAAMC,SACnCF,EAAMlF,aAAe+C,EAAMoC,MAAME,aACjCH,EAAM9B,gBAAkBL,EAAMoC,MAAM9G,GACpC6G,EAAMjF,eAAiB8C,EAAMW,SAC7BwB,EAAM/E,YAAc4C,EAAMuC,gBAC1BJ,EAAMzF,WAAc,GAAIC,MAAKqD,EAAMwC,YAAYrJ,QAAQ,IAAK,KAAK,UAAU0H,UAAU,IAErFd,EAASoC,EAAO7F,MAS5B,QAASiF,GAAqBjH,GAC1B,GAAImI,GAAa,UACbC,EAAQ,GAAIhJ,eAAciJ,WAE9B,KACI,GAAIC,GAAcF,EAAMG,MACpBC,KAAM,gCACNC,WAAYzI,EACZ0I,YACIC,QAASC,EACTC,cAAeC,IAGvBX,GAAaG,EAAYS,WAE7B,MAAOnL,GACHoL,MAAMpL,GAGV,MAAOuK,GAKX,QAAS/C,GAAS6D,EAAKC,GAenB,IAdA,GAAI5E,IAAO,SAAU,SAAU,YAAa,WAAY,OAAQ,OAAQ,OAAQ,OACxE,WAAY,OAAQ,YAAa,OAAQ,QAAS,YAC1D6E,KACAC,EAAQD,EAAI,yBACVA,EAAI,wBAAwBE,aAAgB,MAC9CC,GACEC,IAAK,0JACLC,OAAQ,sIACRC,MAAO,mMAGLC,EAAIJ,EAAOF,GAAMO,KAAKV,GAC1BW,KACAtJ,EAAI,GACGA,KACHoJ,EAAEpJ,KACJsJ,EAAItF,EAAIhE,IAAMoJ,EAAEpJ,GAIlB,IAAI4I,EACJ,MAAOU,GAAIV,EAAUrK,QAAQ,WAAY,IAAIgL,cAE7C,IAAa,QAATT,EAAgB,CACpB,GAAIU,GAAQX,EAAI,6BACZA,EAAI,4BAA4BE,aAAgB,UACpDC,GAAS,4BACTM,EAAIE,MACJF,EAAItF,EAAI,KAAKzF,QAAQyK,EAAQ,SAAUS,EAAIC,EAAIC,GACzCD,IAAKJ,EAAIE,GAAME,GAAMC,KAI3B,aADOL,GAAIM,OACJN,EAKX,QAASvE,GAAiBpB,EAAKkG,GAG3B,IAAK,GAFD7E,GAAQrB,EACRmG,EAAO9E,EAAM/B,MAAM,KACdjD,EAAI,EAAGA,EAAI8J,EAAK7J,OAAQD,IAAK,CAClC,GAAI+J,GAAOD,EAAK9J,GAAGiD,MAAM,IACzB,IAAI+G,mBAAmBD,EAAK,KAAOF,EAC/B,MAAOG,oBAAmBD,EAAK,IAGvC,MAAO,MAprBX,GAEI/L,GAFAc,cAAgB3B,EAAO2B,cAAgB3B,EAAO2B,kBAG9Ce,KAEAoE,EAAa,yCAMjBnF,eAAcmL,KAAO,WACjBjM,EAAaZ,EAAE,YAEfY,EAAWC,KAAK,SAAS+B,EAAGkK,GACxBA,EAAO9M,EAAE8M,GACTrK,EAAO,SAASqK,EAAKtL,KAAK,aAAe+D,KAAKwH,MAAMD,EAAKzM,KAAK,aAAagD,UAG/EzC,EAAWP,KAAK,iBAAiBI,MAAMR,GACvCW,EAAWP,KAAK,kCAAkC2M,SAASzM,GAC3DK,EAAWP,KAAK,sBAAsBI,MAAM2B,GAC5CxB,EAAWP,KAAK,mBAAmBI,MAAMsD,GAEzCnD,EAAWqM,SAAS,6BAA8B,QAASvH,GAC3D9E,EAAWqM,SAAS,YAAa,QAAS3L,GAC1CV,EAAWqM,SAAS,oBAAqB,QAASjL,GAElDpB,EAAWP,KAAK,mBAAmB6M,UAC/BC,OAAQ,OAAQC,QAAS,GAAKC,OAAQ,aAAcC,OAAO5M,EAC3D6M,OAAQ,SAASC,EAAOC,GAIpB,MAHAA,GAAGC,WAAW7M,KAAK,WACfb,EAAEkB,MAAM2C,MAAM7D,EAAEkB,MAAM2C,WAEnB4J,GAEXE,sBAAsB,EACtBC,MAAO,SAASJ,EAAOC,GACnBA,EAAGI,YAAYxK,KAAK,2BAExBwK,YAAa,mCAGjBjN,EAAWP,KAAK,sCAAsCsD,UAAUC,QAAO,EAAMC,MAAO,IAAKC,OAAO,MAipBpG,IAAIoH,GAAmB,2CACnBE,EAAoB,0CAExB1J,eAAciJ,YAAc,SAAUmD,EAAc3C,GA6ThD,MA5TAjK,MAAK6M,YAIe,MAAhBD,IACA5M,KAAK6M,SAAuB,aAAID,GACf,MAAjB3C,IACAjK,KAAK6M,SAAwB,cAAI5C,GACrCjK,KAAK8M,0BAA4B,YACjC9M,KAAK+M,QAAU,MACf/M,KAAKgN,aAAe,iEAOpBhN,KAAKiN,cAAgB,SAAUpD,GAiB3B,MAhBkB,OAAdA,IACAA,MACuB,gBAAhB,KACPA,EAAa7J,KAAKkN,sBAAsBrD,IAC5C7J,KAAKmN,YAActD,EACoB,MAAnC7J,KAAKmN,YAAyB,aAC9BnN,KAAKoN,YACkC,MAAvCpN,KAAKmN,YAA6B,iBAClCnN,KAAKqN,gBAC+B,MAApCrN,KAAKmN,YAA0B,cAC/BnN,KAAKsN,qBACqC,MAA1CtN,KAAKmN,YAAgC,oBACrCnN,KAAKuN,aAC8B,MAAnCvN,KAAKmN,YAAyB,aAC9BnN,KAAKwN,kBAEFxN,MAOXA,KAAKyN,eAAiB,SAAU5D,GAC5B,MAAO7J,MAAKiN,cAAcpD,IAO9B7J,KAAK0N,OAAS,SAAU9D,GACpB,GAAY,IAARA,EACA,KAAM,0CACV,IAAyB,IAArBA,EAAKrD,QAAQ,KAEb,KADAzH,GAAE,SAAS6O,SACL,oCAGV,OADA3N,MAAK4N,MAAQhE,EACN5J,MAOXA,KAAK6N,QAAU,SAAUjE,GACrB,MAAO5J,MAAK0N,OAAO9D,IAOvB5J,KAAK8N,UAAY,SAAUC,GAIvB,GAHc,MAAVA,IACAA,EAAS,OACbA,EAASA,EAAOC,cACZD,EAAOE,MAAM,UACb,KAAM,oDAEV,OADAjO,MAAK+M,QAAUgB,EACR/N,MAOXA,KAAKkO,oBAAsB,SAAUpE,GACjC,GAAIA,EACA,IAAK,GAAIpI,KAAKoI,GACV9J,KAAK6M,SAASnL,GAAKoI,EAAWpI,EAStC,IAPI1B,KAAK6M,SAAkB,UACvB7M,KAAK6M,SAASD,aAAe5M,KAAK6M,SAAS9C,SAC3C/J,KAAK6M,SAAuB,eAC5B7M,KAAK6M,SAASsB,YAAcnO,KAAK6M,SAASuB,cAC1CpO,KAAK6M,SAAwB,gBAC7B7M,KAAK6M,SAASwB,aAAerO,KAAK6M,SAASyB,eAEb,MAA9BtO,KAAK6M,SAASD,aACd,KAAM,kEACV,IAAmC,MAA/B5M,KAAK6M,SAAS5C,cACd,KAAM,mEACV,IAAkC,MAA7BjK,KAAK6M,SAASsB,aAAuD,MAA9BnO,KAAK6M,SAASwB,aACtD,KAAM,kFACV,OAAOrO,OAOXA,KAAKsN,mBAAqB,SAAUrF,GAIhC,GAHc,MAAVA,IACAA,EAASjI,KAAK8M,2BAEyC,MAAvD7E,EAAO+F,cAAcC,MAAM,yBAC3B,KAAM,qEAEV,OADAjO,MAAKmN,YAAoC,uBAAIlF,EAAO+F,cAC7ChO,MAYXA,KAAK2J,KAAO,SAAU4E,GACN,MAARA,IACAA,MAEkB,MAAlBA,EAAa,QACbvO,KAAK8N,UAAUS,EAAa,QACZ,MAAhBA,EAAW,MACXvO,KAAK6N,QAAQU,EAAW,MACN,MAAlBA,EAAa,QACbvO,KAAKsN,mBAAmBiB,EAAa,QACzCvO,KAAKkO,oBAAoBK,EAAiB,YAChB,MAAtBA,EAAiB,YACjBvO,KAAKiN,cAAcsB,EAAiB,WAExC,IAAIC,GAAaxO,KAAKyO,wBAClBC,EAAM1O,KAAK2O,mBAAmBH,EAElC,OADAxO,MAAKmN,YAA6B,gBAAIuB,EAAIE,WAEtC/E,WAAY7J,KAAKmN,YACjB0B,WAAYH,EAAIG,WAChBD,UAAW5O,KAAK8O,aAAa9O,KAAKmN,YAA6B,iBAC/DhD,WAAYnK,KAAK4N,MAAQ,IAAM5N,KAAKyO,wBACpCM,OAAQ/O,KAAKgP,oBAYrBhP,KAAKgP,gBAAkB,SAAUT,GACc,MAAvCvO,KAAKmN,YAA6B,iBAClCnN,KAAK2J,KAAK4E,EAEd,IAAIU,GAAS,QACb,KAAK,GAAIC,KAASlP,MAAKmN,YACnB,GAA6B,MAAzB+B,EAAMjB,MAAM,UAEhB,GAAKjO,KAAKmN,YAAY+B,YAAmBC,OAErC,IAAK,GADDC,GAAUpP,KAAKmN,YAAY+B,GAAOvN,OAC7B0N,EAAI,EAAOD,EAAJC,EAAaA,IACzBJ,GAAUC,EAAQ,KAAOlP,KAAK8O,aAAa9O,KAAKmN,YAAY+B,GAAOG,IAAM,SAI7EJ,IAAUC,EAAQ,KAAOlP,KAAK8O,aAAa9O,KAAKmN,YAAY+B,IAAU,IAG9E,OAAOD,IAQXjP,KAAKkN,sBAAwB,SAAUoC,GAGnC,IAAK,GAFDC,GAAWD,EAAY3K,MAAM,KAC7BsK,KACKO,EAAUD,EAASE,QAASD,EAASA,EAAUD,EAASE,QAAS,CACtE,GACIC,GADAC,EAAWH,EAAQ7K,MAAM,IAEzBgL,GAAS,KACTD,EAAQhE,mBAAmBiE,EAAS,KACpCV,EAAOU,EAAS,IACVV,EAAOU,EAAS,aAAeR,OAIjCF,EAAOU,EAAS,IAAI1J,KAAKyJ,GAHzBT,EAAOU,EAAS,IAAMR,MAAMF,EAAOU,EAAS,IAAKD,GAOrDT,EAAOU,EAAS,IAAMD,EAG9B,MAAOT,IAGXjP,KAAK8O,aAAe,SAAUc,GAC1B,GAAc,MAAVA,EACA,MAAO,EACX,IAAIA,YAAkBT,OAClB,KAAM,8BAEV,OAAOU,oBAAmBD,GAAQ3P,QAAQ,MAAO,OACjDA,QAAQ,MAAO,OACfA,QAAQ,KAAM,OACdA,QAAQ,MAAO,OACfA,QAAQ,MAAO,QAGnBD,KAAKoN,UAAY,SAAUzL,GACT,MAAVA,IACAA,EAAS,EAGb,KAAK,GAFDsN,GAAS,GACTa,EAAU9P,KAAKgN,aAAarL,OACvBD,EAAI,EAAOC,EAAJD,EAAYA,IAAK,CAC7B,GAAIqO,GAAOC,KAAKC,MAAMD,KAAKE,SAAWJ,EACtCb,IAAUjP,KAAKgN,aAAamD,UAAUJ,EAAMA,EAAO,GAGvD,MADA/P,MAAKmN,YAAyB,YAAI8B,EAC3BA,GAGXjP,KAAKuN,WAAa,WACd,GAAkC,MAA9BvN,KAAK6M,SAASD,aACd,KAAM,sCAEV,OADA5M,MAAKmN,YAAgC,mBAAInN,KAAK6M,SAASD,aAChD5M,KAAKmN,YAAYiD,oBAG5BpQ,KAAKwN,gBAAkB,WACnB,GAAqC,MAAjCxN,KAAK6M,SAAuB,aAC5B,MAAO,EACX,IAAoC,MAAhC7M,KAAK6M,SAAsB,YAC3B,KAAM,oDAEV,OADA7M,MAAKmN,YAAyB,YAAInN,KAAK6M,SAASsB,YACzCnO,KAAKmN,YAAYgB,aAG5BnO,KAAKqN,cAAgB,WACjB,GAAIgD,GAAI,GAAI5M,MACR6M,EAAKN,KAAKC,MAAMI,EAAE1I,UAAY,IAElC,OADA3H,MAAKmN,YAA6B,gBAAImD,EAC/BA,GAGXtQ,KAAKyO,sBAAwB,WACzB,GAAIc,GAAW,GAAIJ,OACfoB,KACAC,EAAK,CAET,KAAK,GAAIC,KAAazQ,MAAKmN,YAAa,CACpC,GAAIqD,IAAO,IACP,KAAM,WACVD,GAAWG,QAAQD,GAEvBF,EAAaA,EAAWI,MAExB,KAAK,GADDC,GAAOL,EAAW5O,OACbD,EAAI,EAAOkP,EAAJlP,EAAUA,IAGtB,GAFA+O,EAAYF,EAAW7O,IAEnB+O,EAAUxC,MAAM,cAEpB,GAAIjO,KAAKmN,YAAYsD,YAAsBtB,OAGvC,IAAK,GAFD0B,GAAS7Q,KAAKmN,YAAYsD,GAAWE,OACrCG,EAAQD,EAAOlP,OACV0N,EAAI,EAAOyB,EAAJzB,EAAWA,IAAK,CAC5B,GAAImB,IAAO,IACP,KAAM,WACVjB,GAAStJ,KAAKjG,KAAK8O,aAAa2B,GAAa,IACnCzQ,KAAK8O,aAAa+B,EAAOxB,SAI3CE,GAAStJ,KAAKjG,KAAK8O,aAAa2B,GAAa,IAC/BzQ,KAAK8O,aAAa9O,KAAKmN,YAAYsD,IAErD,OAAOlB,GAASwB,KAAK,MAGzB/Q,KAAKgR,cAAgB,SAAUC,EAAGZ,EAAGa,EAAIC,GAGO,QAASC,GAAGC,EAAGC,EAAGC,EAAGlB,GAAK,MAAQ,IAAJgB,EAAkBC,EAAIC,GAAQD,EAAKjB,EAAc,GAAJgB,EAAiBC,EAAIC,EAAIlB,EAAa,GAAJgB,EAAkBC,EAAIC,EAAMD,EAAIjB,EAAMkB,EAAIlB,EAAaiB,EAAIC,EAAIlB,EAAK,QAASmB,GAAGH,GAAK,MAAY,IAAJA,EAAU,WAAkB,GAAJA,EAAU,WAAkB,GAAJA,EAAU,YAAc,WAAc,QAASI,GAAGC,EAAGC,GAAK,GAAIC,IAAS,MAAJF,IAAmB,MAAJC,GAAa7G,GAAK4G,GAAK,KAAOC,GAAK,KAAOC,GAAK,GAAK,OAAQ9G,IAAK,GAAW,MAAJ8G,EAAe,QAASC,GAAGC,EAAGP,GAAK,MAAQO,IAAKP,EAAMO,IAAO,GAAKP,EAAO,QAASQ,GAAGL,EAAGE,GAAKF,EAAEE,GAAK,IAAM,KAAS,GAAKA,EAAI,GAAKF,GAAIE,EAAI,IAAM,GAAM,GAAK,IAAMA,CAAkG,KAAK,GAAhGI,IAAK,IAAKC,EAAI,WAAYX,EAAI,WAAYC,EAAI,YAAalB,EAAI,UAAWrR,EAAI,YAAsB0C,EAAI,EAAGA,EAAIgQ,EAAE/P,OAAQD,GAAK,GAAI,CAAyC,IAAK,GAAxCwQ,GAAID,EAAGE,EAAIb,EAAGhM,EAAIiM,EAAGa,EAAI/B,EAAGgC,EAAIrT,EAAYqQ,EAAI,EAAO,GAAJA,EAAQA,IAAK,CAAgB2C,EAAE3C,GAAR,GAAJA,EAAiBqC,EAAEhQ,EAAI2N,GAAoBwC,EAAGG,EAAE3C,EAAI,GAAK2C,EAAE3C,EAAI,GAAK2C,EAAE3C,EAAI,IAAM2C,EAAE3C,EAAI,IAAK,EAAM,IAAIgC,GAAII,EAAGA,EAAGI,EAAGI,EAAG,GAAIb,EAAG/B,EAAGiC,EAAGC,EAAGlB,IAAKoB,EAAGA,EAAGzS,EAAGgT,EAAE3C,IAAKmC,EAAGnC,IAAMrQ,GAAIqR,EAAGA,EAAIkB,EAAGA,EAAIM,EAAGP,EAAG,IAAKA,EAAIW,EAAGA,EAAIZ,EAAKY,EAAIR,EAAGQ,EAAGC,GAAIZ,EAAIG,EAAGH,EAAGa,GAAIZ,EAAIE,EAAGF,EAAGjM,GAAI+K,EAAIoB,EAAGpB,EAAG+B,GAAIpT,EAAIyS,EAAGzS,EAAGqT,GAAM,OAAQJ,EAAGX,EAAGC,EAAGlB,EAAGrR,GAAM,QAASsT,GAAGD,GAAoC,IAAK,GAAhCf,MAAQxG,GAAK,GAAKqG,GAAM,EAAYzP,EAAI,EAAGA,EAAI2Q,EAAE1Q,OAASwP,EAAIzP,GAAKyP,EAAMG,EAAE5P,GAAK,KAAO2Q,EAAEE,WAAW7Q,EAAI,GAAKoJ,IAAO,GAAKqG,EAAKzP,EAAI,EAAO,OAAO4P,GAAK,QAASkB,GAAGvB,EAAGZ,GAAK,GAAIiB,GAAIgB,EAAGrB,EAAQK,GAAE3P,OAAS,KAAM2P,EAAIS,EAAGT,EAAGL,EAAEtP,OAASwP,GAA+B,KAAK,GAAzBgB,IAAK,IAAKD,GAAK,IAAcxQ,EAAI,EAAO,GAAJA,EAAQA,IAAOyQ,EAAEzQ,GAAY,UAAP4P,EAAE5P,GAAiBwQ,EAAExQ,GAAY,WAAP4P,EAAE5P,EAAmB,IAAI+Q,GAAIV,EAAGI,EAAEO,OAAOJ,EAAGjC,IAAK,IAAMA,EAAE1O,OAASwP,EAAK,OAAOY,GAAGG,EAAEQ,OAAOD,GAAI,KAAc,QAASE,GAAGrB,GAAyF,IAAK,GAArFD,GAAI,mEAAoEgB,EAAI,GAAa3Q,EAAI,EAAGA,EAAe,EAAX4P,EAAE3P,OAAYD,GAAK,EAA6K,IAAK,GAAzK0Q,IAAOd,EAAE5P,GAAK,IAAM,GAAK,EAAIA,EAAI,GAAM,MAAS,IAAS4P,EAAE5P,EAAI,GAAK,IAAM,GAAK,GAAKA,EAAI,GAAK,GAAM,MAAS,EAAO4P,EAAE5P,EAAI,GAAK,IAAM,GAAK,GAAKA,EAAI,GAAK,GAAM,IAAgB2N,EAAI,EAAO,EAAJA,EAAOA,IAA4CgD,GAA7B,EAAJ3Q,EAAY,EAAJ2N,EAAmB,GAAXiC,EAAE3P,OAAoBuP,EAAkBG,EAAEuB,OAAQR,GAAK,GAAK,EAAI/C,GAAM,GAAa,OAAOgD,GAAK,QAASQ,GAAG5B,EAAGZ,GAAK,MAAOsC,GAAGH,EAAGvB,EAAGZ,IAAO,MAAzhEa,KAAMA,EAAK,KAAYC,IAAMA,EAAK,GAA8/D0B,EAAG5B,EAAGZ,IAG/iErQ,KAAK2O,mBAAqB,WAEtB,GAAImE,GAAY9S,KAAK8O,aAAa9O,KAAK6M,SAAS5C,eAAiB,IAC7DjK,KAAK8O,aAAa9O,KAAK6M,SAASwB,aACpC,IAAkD,aAA9CrO,KAAKmN,YAAoC,uBACzC,OAAS0B,WAAY,KAAMD,UAAWkE,EAE1C,IAAkD,aAA9C9S,KAAKmN,YAAoC,uBAAkB,CAC3D,GAAI4F,GAAY/S,KAAK8O,aAAa9O,KAAK+M,SAAW,IAAM/M,KAAK8O,aAAa9O,KAAK4N,OAAS,IAAM5N,KAAK8O,aAAa9O,KAAKyO,wBACrH,QAASI,WAAckE,EAAWnE,UAAa5O,KAAKgR,cAAc8B,EAAWC,IAEjF,MAAO,OAGJ/S,OAMbgT,OAAQjS,QAkBT,SAAUqG,GA8GP,QAAS6L,GAAkBC,EAAQC,GAa/B,GAIIC,GAJAC,EAAqB,EAAwBF,GAAsB,EACnEG,GAAsB,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACxC7L,GAAsB,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACxC8L,GAAsB,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,GAO/C,IAHAL,EAASA,EAAOlF,eAGXkF,EAAgC,MAAOzL,EACvC,IAAsB,gBAAXyL,GAAqB,KAAM,IAAIM,OAAM,kCAAoCN,EAAS,IAGlG,MAAIE,EAAS,8DAA8DrI,KAAKmI,IAS5E,KAAM,IAAIM,OAAM,WAAaN,EAAS,mCANtC,KAAK,GAAIxR,GAAI,EAAGA,EAAI4R,EAAa3R,OAAQD,IAAK,CAC1C,GAAI+R,GAAcH,EAAa5R,EAC/B+F,GAAS/F,GAAK0R,EAAOK,IAAgBL,EAAOK,GAAaxT,QAAQ,aAAc,IAAM,EAO7F,GAAIoT,EAEA,IAAK,GAAI3R,GAAI+F,EAAS9F,OAAS,EAAGD,EAAI,EAAGA,IACjC+F,EAAS/F,IAAM6R,EAAe7R,KAC9B+F,EAAS/F,EAAE,GAAK+F,EAAS/F,EAAE,GAAKsO,KAAKC,MAAMxI,EAAS/F,GAAG6R,EAAe7R,IACtE+F,EAAS/F,GAAK+F,EAAS/F,GAAK6R,EAAe7R,GAKvD,OAAO+F,GA5JNL,EAAOC,UAASD,EAAOC,YACvBD,EAAOC,QAAQC,SAAQF,EAAOC,QAAQC,WAO3CF,EAAOC,QAAQqM,QAAU,MAmBzBtM,EAAOC,QAAQC,OAAOuE,MAAQ,SAASqH,EAAQG,GAC3C,MAAOJ,GAAkBC,EAAQG,IAMrCjM,EAAOC,QAAQC,OAAOC,oBAAsB,SAAS2L,GAYjD,IAAK,GAVDS,IAAkB,QAClB,OACA,OACA,MACA,KACA,GACA,GACAC,EAAkBX,EAAkBC,GACpCW,EAAoB,EAEfnS,EAAI,EAAGA,EAAIkS,EAAgBjS,OAAQD,IACxCmS,GAAqBD,EAAgBlS,GAAKiS,EAAejS,EAG7D,OAAOmS,IAQXzM,EAAOC,QAAQC,OAAOwM,QAAU,SAASZ,GACrC,IAEI,MADAD,GAAkBC,IACX,EACT,MAAMlU,GACJ,OAAO,IAafoI,EAAOC,QAAQC,OAAOyM,cAAgB,SAASb,EAAQc,EAAWC,EAAiBZ,GAE/E,GAAIpE,IAAU,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAClC2E,EAAkBX,EAAkBC,EAAQG,EAG3CW,KAAiBA,GAAmB,OAAQ,QAAS,OAAQ,MAAO,OAAQ,SAAU,WACtFC,IAAiBA,GAAmB,QAAS,SAAU,QAAS,OAAQ,QAAS,UAAW,WAGjG,KAAK,GAAIvS,GAAI,EAAGA,EAAIkS,EAAgBjS,OAAQD,IACpCkS,EAAgBlS,GAAK,IACUuN,EAAOvN,GAAV,GAAtBkS,EAAgBlS,GAAqBkS,EAAgBlS,GAAK,IAAMsS,EAAUtS,GACrCkS,EAAgBlS,GAAK,IAAMuS,EAAgBvS,GAQ9F,OAAOuN,GAAO8B,KAAK,KAAKmD,OAAOjU,QAAQ,WAAW,OA+DvD+S,OAAO5L,OAAS4L,OAAO5L,YAK1BtI,EAAEqV,UAAUC,MAAM,WAEd5T,cAAcmL","sourcesContent":[";(function(global, $){\r\n    //es5 strict mode\r\n    \"use strict\";\r\n\r\n    var ChannelVideos = global.ChannelVideos = global.ChannelVideos || {};\r\n\r\n    var fieldsElem;\r\n    var fields = {};\r\n\r\n    var youtubeKey = 'AIzaSyCaVU3uYehPlaQQqgIo66N9FCZhRN1kbNg';\r\n    var youtubeDurationRegex = /P((([0-9]*\\.?[0-9]*)Y)?(([0-9]*\\.?[0-9]*)M)?(([0-9]*\\.?[0-9]*)W)?(([0-9]*\\.?[0-9]*)D)?)?(T(([0-9]*\\.?[0-9]*)H)?(([0-9]*\\.?[0-9]*)M)?(([0-9]*\\.?[0-9]*)S)?)?/\r\n\r\n\r\n    // ----------------------------------------------------------------------\r\n\r\n    ChannelVideos.Init = function(){\r\n        fieldsElem = $('.CVField');\r\n\r\n        fieldsElem.each(function(i, elem){\r\n            elem = $(elem);\r\n            fields['field_'+elem.data('field_id')] = JSON.parse(elem.find('.jsondata').html());\r\n        });\r\n\r\n        fieldsElem.find('.SearchVideos').click(toggleSearchVideos);\r\n        fieldsElem.find('.SearchVideos input[type=text]').keypress(disableEnter);\r\n        fieldsElem.find('.SVWrapper .Button').click(searchForVideos);\r\n        fieldsElem.find('.SubmitVideoUrl').click(submitVideoUrl);\r\n\r\n        fieldsElem.delegate('.VideosResults .video .add', 'click', addVideo);\r\n        fieldsElem.delegate('.DelVideo', 'click', delVideo);\r\n        fieldsElem.delegate('.ClearVideoSearch', 'click', clearVideoSearch);\r\n\r\n        fieldsElem.find('.AssignedVideos').sortable({\r\n            cursor: 'move', opacity: 0.6, handle: '.MoveVideo', update:syncOrderNumbers,\r\n            helper: function(event, ui){\r\n                ui.children().each(function() {\r\n                    $(this).width($(this).width());\r\n                });\r\n                return ui;\r\n            },\r\n            forcePlaceholderSize: true,\r\n            start: function(event, ui){\r\n                ui.placeholder.html('<td colspan=\"20\"></td>');\r\n            },\r\n            placeholder: 'cvideo-reorder-state-highlight'\r\n        });\r\n\r\n        fieldsElem.find('.AssignedVideos .CVItem .PlayVideo').colorbox({iframe:true, width: 450, height:375});\r\n    };\r\n\r\n    // ----------------------------------------------------------------------\r\n\r\n    function toggleSearchVideos(e){\r\n        $(e.target).closest('.CVTable').find('.SVWrapperTR').toggle();\r\n        return false;\r\n    }\r\n\r\n    // ----------------------------------------------------------------------\r\n\r\n    function disableEnter(e){\r\n        if (e.which == 13)  {\r\n            $(e.target).closest('.CVField').find('.searchbutton').click();\r\n            return false;\r\n        }\r\n    }\r\n\r\n    // ----------------------------------------------------------------------\r\n\r\n    function syncOrderNumbers(){\r\n        var attr;\r\n\r\n        // Loop over all Channel Videos Fields\r\n        fieldsElem.each(function(FieldIndex, VideoField){\r\n\r\n\r\n            // Loop over all individual Videos\r\n            $(VideoField).find('.CVItem').each(function(VideoIndex, VideoItem){\r\n\r\n                // Loop Over all Input Elements of the Relation Item\r\n                $(VideoItem).find('input, textarea, select').each(function(){\r\n                    attr = $(this).attr('name').replace(/\\[videos\\]\\[.*?\\]/, '[videos][' + (VideoIndex+1) + ']');\r\n                    $(this).attr('name', attr);\r\n                });\r\n            });\r\n\r\n            // Add Zebra\r\n            $(VideoField).find('.CVItem').removeClass('odd');\r\n            $(VideoField).find('.CVItem:odd').addClass('odd');\r\n        });\r\n\r\n    }\r\n\r\n    // ----------------------------------------------------------------------\r\n\r\n    function delVideo(e){\r\n\r\n        var VideoID = $(e.target).data('id');\r\n\r\n        // Send Ajax\r\n        if (VideoID) {\r\n            $.get(ChannelVideos.ACT_URL, {video_id: VideoID, ajax_method: 'delete_video'}, function(){\r\n\r\n            });\r\n        }\r\n\r\n        $(e.target).closest('.CVItem').fadeOut('slow', function(){\r\n            $(this).remove(); syncOrderNumbers();\r\n        });\r\n\r\n    }\r\n\r\n    // ----------------------------------------------------------------------\r\n\r\n    function clearVideoSearch(e){\r\n\r\n        var customField = jQuery(e.target).closest('.CVField');\r\n\r\n        TargetBox.find('.VideosResults .inner').empty();\r\n\r\n        return false;\r\n    }\r\n\r\n    // ----------------------------------------------------------------------\r\n\r\n    function searchForVideos(e){\r\n        e.preventDefault();\r\n\r\n        var results = {};\r\n        var params = {};\r\n        var customField = $(e.target).closest('.CVField');\r\n        var videoServices = fields['field_'+customField.data('field_id')].services;\r\n\r\n        // Grab all input fields\r\n        customField.find('.SVWrapper .cvsearch').find('input[type=text], input[type=hidden]').each(function(){\r\n            params[$(this).attr('rel')] = jQuery(this).val();\r\n        });\r\n\r\n        for (var i = 0; i < videoServices.length; i++) {\r\n            customField.find('.VideosResults .results-'+videoServices[i]).show().find('.LoadingVideos').show().siblings('.inner').empty();\r\n\r\n            if (videoServices[i] == 'youtube') {\r\n                youtubeSearchVideos(params, customField);\r\n            } else {\r\n                vimeoSearchVideos(params, customField);\r\n            }\r\n        }\r\n    }\r\n\r\n    // ----------------------------------------------------------------------\r\n\r\n    function addVideoResults(service, items, customField){\r\n        var Label = (service == 'youtube') ? 'Youtube' : 'Vimeo';\r\n        var html = '';\r\n\r\n        if (items.length === 0) {\r\n            html += '<p>No Results Found...</p>';\r\n        }\r\n\r\n        for (var i = 0; i < items.length; i++) {\r\n            html += '<div class=\"video\" rel=\"'+service+'|'+items[i].id+'\" id=\"'+service+'__'+items[i].id+'\">';\r\n            html +=     '<img src=\"' + items[i].img_url + '\" width=\"100px\" height=\"75px\">';\r\n            html +=     '<small>'+ items[i].title +'</small>';\r\n            html +=     '<span>';\r\n            html +=         '<a href=\"' + items[i].vid_url + '\" class=\"play\">&nbsp;</a>';\r\n            html +=         '<a href=\"#\" class=\"add\">&nbsp;</a>';\r\n            html +=     '</span>';\r\n            html += '</div>';\r\n        }\r\n\r\n        html += '<br clear=\"all\"></div>';\r\n\r\n        customField.find('.VideosResults .results-'+service).find('.LoadingVideos').hide().siblings('.inner').show().html(html);\r\n        customField.find('.VideosResults .video .play').colorbox({iframe:true, width: 450, height:375});\r\n    }\r\n\r\n    // ----------------------------------------------------------------------\r\n\r\n    function submitVideoUrl(e){\r\n        var videoUrl = prompt(\"Video URL?\", \"\");\r\n        if (videoUrl === null) return false;\r\n\r\n        var customField = $(e.target).closest('div.CVField');\r\n        var videoServices = fields['field_'+customField.data('field_id')].services;\r\n\r\n        customField.find('.SVWrapperTR').show();\r\n\r\n        for (var i = 0; i < videoServices.length; i++) {\r\n            customField.find('.VideosResults .results-'+videoServices[i]).show().find('.LoadingVideos').show().siblings('.inner').empty();\r\n\r\n            if (videoServices[i] == 'youtube') {\r\n                youtubeSubmitUrl(videoUrl, customField);\r\n            } else {\r\n                vimeoSubmitUrl(videoUrl, customField);\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    // ----------------------------------------------------------------------\r\n\r\n    function addVideoToTable(video, field_id) {\r\n        var field_data = fields['field_'+field_id];\r\n        var customField = $('#ChannelVideos'+field_id);\r\n        var html = '';\r\n\r\n        customField.find('#'+video.service+'__'+video.service_video_id).slideUp();\r\n\r\n        var video_date = new Date();\r\n        video_date.setTime( (video.video_date*1000) );\r\n\r\n        if (field_data.layout == 'table') {\r\n            html += '<tr class=\"CVItem\">';\r\n            html +=     '<td><a href=\"'+video.video_url+'\" class=\"PlayVideo\"><img src=\"'+video.video_img_url+'\" width=\"100px\" height=\"75px\"></a></td>';\r\n            html +=     '<td>'+video.video_title+'</td>';\r\n            html +=     '<td>'+video.video_author+'</td>';\r\n            html +=     '<td>'+(video.video_duration/60).toFixed(2)+' min</td>';\r\n            html +=     '<td>'+video.video_views+'</td>';\r\n            html +=     '<td>'+video_date.toDateString()+'</td>';\r\n            html +=     '<td>';\r\n            html +=         '<a href=\"javascript:void(0)\" class=\"MoveVideo\">&nbsp;</a>';\r\n            html +=         '<a href=\"javascript:void(0)\" class=\"DelVideo\" data-id=\"'+video.video_id+'\">&nbsp;</a>';\r\n\r\n            if (video.video_id > 0) {\r\n                html += '<input name=\"'+field_data.field_name+'[videos][0][video_id]\" type=\"hidden\" value=\"'+video.video_id+'\">';\r\n            } else {\r\n                html += '<textarea name=\"'+field_data.field_name+'[videos][0][data]\" style=\"display:none\">'+JSON.stringify(video)+'</textarea>';\r\n            }\r\n\r\n            html +=     '</td>';\r\n            html += '</tr>';\r\n        } else {\r\n            html += '<div class=\"CVItem VideoTile\">';\r\n            html +=     '<a href=\"'+video.video_url+'\" class=\"PlayVideo\"><img src=\"'+video.video_img_url+'\" width=\"100px\" height=\"75px\"></a>';\r\n            html +=     '<small>'+video.video_title+'</small>';\r\n            html +=     '<span>';\r\n            html +=         '<a href=\"javascript:void(0)\" class=\"MoveVideo\">&nbsp;</a>';\r\n            html +=         '<a href=\"javascript:void(0)\" class=\"DelVideo\" data-id=\"'+video.video_id+'\">&nbsp;</a>';\r\n\r\n            if (video.video_id > 0) {\r\n                html += '<input name=\"'+field_data.field_name+'[videos][0][video_id]\" type=\"hidden\" value=\"'+video.video_id+'\">';\r\n            } else {\r\n                html += '<textarea name=\"'+field_data.field_name+'[videos][0][data]\" style=\"display:none\">'+JSON.stringify(video)+'</textarea>';\r\n            }\r\n            html +=     '</span>';\r\n            html += '</div>';\r\n        }\r\n\r\n        customField.find('.AssignedVideos .NoVideos').hide();\r\n        customField.find('.AssignedVideos').append(html);\r\n        syncOrderNumbers();\r\n        customField.find('.AssignedVideos .CVItem .PlayVideo').colorbox({iframe:true, width: 450, height:375});\r\n    }\r\n\r\n    // ----------------------------------------------------------------------\r\n\r\n    function addVideo(e){\r\n        var Parent = jQuery(e.target).closest('div.video');\r\n        var customField = jQuery(e.target).closest('div.CVField');\r\n        var field_id = customField.data('field_id');\r\n\r\n        jQuery(e.target).addClass('loading');\r\n\r\n        var Params = {};\r\n        Params.ajax_method = 'get_video';\r\n        Params.service = Parent.attr('rel').split('|')[0];\r\n        Params.video_id = Parent.attr('rel').split('|')[1];\r\n        Params.field_id = field_id;\r\n        Params.field_name = fields['field_'+field_id].field_name;\r\n        Params.field_layout = fields['field_'+field_id].layout;\r\n\r\n        if (Params.service == 'youtube') {\r\n            youtubeGetVideo(Params.video_id, field_id, addVideoToTable);\r\n\r\n            return false;\r\n        } else {\r\n            vimeoGetVideo(Params.video_id, field_id, addVideoToTable);\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    // ----------------------------------------------------------------------\r\n\r\n    function youtubeSearchVideos(params, customField){\r\n        var i, entry, video_id;\r\n\r\n        if (params.author) params.keywords += ' ' +params.author;\r\n\r\n        $.ajax({\r\n            crossDomain: true,\r\n            dataType: 'json', type: 'GET',\r\n            url: 'https://www.googleapis.com/youtube/v3/search',\r\n            data: {q:params.keywords, maxResults:params.limit, type:'video', part:'snippet', key:youtubeKey},\r\n            success: function(rdata){\r\n                var videos = [];\r\n\r\n                for (var i = 0; i < rdata.items.length; i++) {\r\n                    var video = rdata.items[i];\r\n                    var videoID = video.id.videoId;\r\n\r\n                    videos.push({\r\n                        id: videoID,\r\n                        title: video.snippet.title,\r\n                        img_url: 'https://i.ytimg.com/vi/' + videoID + '/default.jpg',\r\n                        vid_url: 'https://www.youtube.com/embed/'+videoID\r\n                    });\r\n\r\n                }\r\n                addVideoResults('youtube', videos, customField);\r\n            }\r\n        });\r\n    }\r\n\r\n    // ----------------------------------------------------------------------\r\n\r\n    function youtubeSubmitUrl(url, customField){\r\n        var servicebox = customField.find('.VideosResults .results-youtube').show();\r\n        var inner = servicebox.find('.inner');\r\n        var loading = servicebox.find('.LoadingVideos');\r\n        var id = null;\r\n        var parts;\r\n\r\n        if (url.indexOf('youtube') === -1 && url.indexOf('youtu.be') === -1) {\r\n            loading.hide();\r\n            inner.html('<p>Not a valid Youtube URL</p>');\r\n            return;\r\n        }\r\n\r\n        // http://www.youtube.com/watch?v=9bZkp7q19f0\r\n        if (url.indexOf('youtube.com/watch') > 0) {\r\n            parts = parseUrl(url);\r\n            id = getQueryVariable(parts.query, 'v');\r\n        }\r\n\r\n        // http://youtu.be/9bZkp7q19f0\r\n        else if (url.indexOf('youtu.be') > 0) {\r\n            parts = url.split('/');\r\n            id = parts[(parts.length-1)];\r\n        }\r\n\r\n        // http://www.youtube.com/embed/9bZkp7q19f0\r\n        else if (url.indexOf('youtube.com/embed') > 0) {\r\n            parts = url.split('/');\r\n            id = parts[(parts.length-1)];\r\n        }\r\n\r\n        if (id === null) {\r\n            loading.hide();\r\n            inner.html('<p>Could not parse Youtube ID from that URL</p>');\r\n            return;\r\n        }\r\n\r\n        $.ajax({\r\n            crossDomain: true,\r\n            dataType: 'json', type: 'GET',\r\n            url: 'https://www.googleapis.com/youtube/v3/videos',\r\n            data: {id:id, part:'snippet', key:youtubeKey},\r\n            success: function(rdata){\r\n                loading.hide();\r\n\r\n                if (typeof rdata.pageInfo === 'undefined' || typeof rdata.pageInfo.totalResults != 1) {\r\n                    inner.html('<p>Youtube could not find the video. (ID: '+id+')</p>');\r\n                }\r\n\r\n                var video = rdata.items[0];\r\n                var videoId = video.id;\r\n\r\n                addVideoResults('youtube', [{\r\n                    id: videoId,\r\n                    title: video.snippet.title,\r\n                    img_url: 'https://i.ytimg.com/vi/' + videoId + '/default.jpg',\r\n                    vid_url: 'https://www.youtube.com/embed/'+videoId\r\n                }], customField);\r\n            }\r\n        });\r\n    }\r\n\r\n    // ----------------------------------------------------------------------\r\n\r\n    function youtubeGetVideo(id, field_id, callback){\r\n        $.ajax({\r\n            crossDomain: true,\r\n            dataType: 'json', type: 'GET',\r\n            url: 'https://www.googleapis.com/youtube/v3/videos',\r\n            data: {id:id, part:'snippet,statistics,contentDetails', key:youtubeKey},\r\n            success: function(rdata){\r\n                var videoID = id;\r\n                var video = {};\r\n                var entry = rdata.items[0];\r\n\r\n                video.service = 'youtube';\r\n                video.service_video_id = videoID;\r\n                video.video_id = 0;\r\n                video.video_url = 'http://www.youtube.com/embed/' + videoID;\r\n                video.video_img_url = 'http://i.ytimg.com/vi/' + videoID + '/default.jpg';\r\n                video.video_title = entry.snippet.title;\r\n                video.video_desc = entry.snippet.description;\r\n                video.video_username = entry.snippet.channelTitle;\r\n                video.video_author = entry.snippet.channelTitle;\r\n                video.video_author_id = 0;\r\n                video.video_duration = nezasa.iso8601.Period.parseToTotalSeconds(entry.contentDetails.duration);\r\n                video.video_date = (new Date(entry.publishedAt).getTime()/1000);\r\n\r\n                video.video_views = 0;\r\n\r\n                // When the video has no views, stats will not exists\r\n                if (typeof entry.statistics != 'undefined'\r\n                    && typeof entry.statistics.viewCount != 'undefined') {\r\n                    video.video_views = entry.statistics.viewCount;\r\n                }\r\n\r\n                callback(video, field_id);\r\n            }\r\n        });\r\n    }\r\n\r\n    // ----------------------------------------------------------------------\r\n\r\n    function vimeoSearchVideos(params, customField){\r\n        var i, entry, img_url, thumb;\r\n\r\n        var servicebox = customField.find('.VideosResults .results-vimeo').show();\r\n        var inner = servicebox.find('.inner');\r\n        var loading = servicebox.find('.LoadingVideos');\r\n\r\n        var urlparams = {};\r\n        urlparams.format = 'jsonp';\r\n        urlparams.method = 'vimeo.videos.search';\r\n        urlparams.query = params.keywords;\r\n        if (params.author) urlparams.user_id = params.author;\r\n        urlparams.per_page = params.limit;\r\n        urlparams.full_response = '1';\r\n        var url = vimeoGetTheSignedUrl($.param(urlparams));\r\n        //url = decodeURIComponent(url.replace(/\\+/g,  \" \"));\r\n\r\n        $.ajax({\r\n            crossDomain: true,\r\n            dataType: \"jsonp\",\r\n            url: url,\r\n            jsonp: false, jsonpCallback: \"vimeoCallback\",\r\n            cache: true, // Adding the extra cache params breaks it!!\r\n            success: function(rdata){\r\n                if (rdata.stat != 'ok') {\r\n                    loading.hide();\r\n                    inner.html('<p>The vimeo request failed!</p>');\r\n                    return;\r\n                }\r\n\r\n                if (rdata.videos.on_this_page === 0) {\r\n                    loading.hide();\r\n                    inner.html('<p>No results found..</p>');\r\n                    return;\r\n                }\r\n\r\n                var Videos = [];\r\n\r\n                for (var i = 0; i < rdata.videos.video.length; i++) {\r\n                    entry = rdata.videos.video[i];\r\n\r\n                    for (var ii = entry.thumbnails.thumbnail.length - 1; ii >= 0; ii--) {\r\n                        thumb = entry.thumbnails.thumbnail[ii];\r\n                        if (thumb.width == '100' || thumb.height == '100') {\r\n                            img_url = thumb._content;\r\n                        }\r\n                    }\r\n\r\n                    Videos.push({\r\n                        id: entry.id,\r\n                        title: entry.title,\r\n                        img_url: img_url,\r\n                        vid_url: 'http://player.vimeo.com/video/' + entry.id + '?title=0&byline=0&portrait=0'\r\n                    });\r\n\r\n                }\r\n\r\n                addVideoResults('vimeo', Videos, customField);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    // ----------------------------------------------------------------------\r\n\r\n    function vimeoSubmitUrl(url, customField){\r\n        var servicebox = customField.find('.VideosResults .results-vimeo').show();\r\n        var inner = servicebox.find('.inner');\r\n        var loading = servicebox.find('.LoadingVideos');\r\n        var id = null;\r\n        var parts, entry, thumb, img_url;\r\n\r\n        if (url.indexOf('vimeo') === -1) {\r\n            loading.hide();\r\n            inner.html('<p>Not a valid Vimeo URL</p>');\r\n            return;\r\n        }\r\n\r\n        // https://vimeo.com/58161697\r\n        if (url.indexOf('vimeo.com/') > 0) {\r\n            parts = url.split('/');\r\n            id = parts[(parts.length-1)];\r\n        }\r\n\r\n        if (id === null) {\r\n            loading.hide();\r\n            inner.html('<p>Could not parse Vimeo ID from that URL</p>');\r\n            return;\r\n        }\r\n\r\n        var urlparams = {};\r\n        urlparams.format = 'jsonp';\r\n        urlparams.method = 'vimeo.videos.getInfo';\r\n        urlparams.video_id = id;\r\n        urlparams.full_response = '1';\r\n\r\n        url = vimeoGetTheSignedUrl($.param(urlparams));\r\n        //url = decodeURIComponent(url.replace(/\\+/g,  \" \"));\r\n\r\n        $.ajax({\r\n            crossDomain: true,\r\n            dataType: \"jsonp\",\r\n            url: url,\r\n            jsonp: false, jsonpCallback: \"vimeoCallback\",\r\n            cache: true, // Adding the extra cache params breaks it!!\r\n            success: function(rdata){\r\n                if (rdata.stat != 'ok') {\r\n                    loading.hide();\r\n                    inner.html('<p>The vimeo request failed!</p>');\r\n                    return;\r\n                }\r\n\r\n                if (rdata.video.length === 0) {\r\n                    loading.hide();\r\n                    inner.html('<p>No results found..</p>');\r\n                    return;\r\n                }\r\n\r\n                var Videos = [];\r\n\r\n                for (var i = 0; i < rdata.video.length; i++) {\r\n                    entry = rdata.video[i];\r\n\r\n                    for (var ii = entry.thumbnails.thumbnail.length - 1; ii >= 0; ii--) {\r\n                        thumb = entry.thumbnails.thumbnail[ii];\r\n                        if (thumb.width == '100' || thumb.height == '100') {\r\n                            img_url = thumb._content;\r\n                        }\r\n                    }\r\n\r\n                    Videos.push({\r\n                        id: entry.id,\r\n                        title: entry.title,\r\n                        img_url: img_url,\r\n                        vid_url: 'http://player.vimeo.com/video/' + entry.id + '?title=0&byline=0&portrait=0'\r\n                    });\r\n\r\n                }\r\n\r\n                addVideoResults('vimeo', Videos, customField);\r\n            }\r\n        });\r\n\r\n        return;\r\n    }\r\n\r\n    // ----------------------------------------------------------------------\r\n\r\n    function vimeoGetVideo(id, field_id, callback){\r\n        var entry, thumb, img_url;\r\n\r\n        var urlparams = {};\r\n        urlparams.format = 'jsonp';\r\n        urlparams.method = 'vimeo.videos.getInfo';\r\n        urlparams.video_id = id;\r\n        urlparams.full_response = '1';\r\n        var url = vimeoGetTheSignedUrl($.param(urlparams));\r\n        //url = decodeURIComponent(url.replace(/\\+/g,  \" \"));\r\n\r\n        $.ajax({\r\n            crossDomain: true,\r\n            dataType: \"jsonp\",\r\n            url: url,\r\n            jsonp: false, jsonpCallback: \"vimeoCallback\",\r\n            cache: true, // Adding the extra cache params breaks it!!\r\n            success: function(rdata){\r\n                if (rdata.stat != 'ok') {\r\n                    loading.hide();\r\n                    inner.html('<p>The vimeo request failed!</p>');\r\n                    return;\r\n                }\r\n\r\n                entry = rdata.video[0];\r\n\r\n                for (var ii = entry.thumbnails.thumbnail.length - 1; ii >= 0; ii--) {\r\n                    thumb = entry.thumbnails.thumbnail[ii];\r\n                    if (thumb.width == '100' || thumb.height == '100') {\r\n                        img_url = thumb._content;\r\n                    }\r\n                }\r\n\r\n                var Video = {};\r\n                Video.service = 'vimeo';\r\n                Video.service_video_id = entry.id;\r\n                Video.video_id = 0;\r\n                Video.video_url = 'http://player.vimeo.com/video/' + entry.id + '?title=0&byline=0&portrait=0';\r\n                Video.video_img_url = img_url;\r\n                Video.video_title = entry.title;\r\n                Video.video_desc = entry.description;\r\n                Video.video_username = entry.owner.username;\r\n                Video.video_author = entry.owner.display_name;\r\n                Video.video_author_id = entry.owner.id;\r\n                Video.video_duration = entry.duration;\r\n                Video.video_views = entry.number_of_plays;\r\n                Video.video_date = (new Date(entry.upload_date.replace(' ', 'T')+'-00:00').getTime()/1000);\r\n\r\n                callback(Video, field_id);\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    // ----------------------------------------------------------------------\r\n\r\n    function vimeoGetTheSignedUrl(params) {\r\n        var recvd_resp = \"nothing\";\r\n        var oauth = new ChannelVideos.OAuthSimple();\r\n\r\n        try {\r\n            var oauthObject = oauth.sign({\r\n                path: 'https://vimeo.com/api/rest/v2',\r\n                parameters: params,\r\n                signatures: {\r\n                    api_key: vimeoConsumerKey,\r\n                    shared_secret: vimeoSharedSecret\r\n                }\r\n            });\r\n            recvd_resp = oauthObject.signed_url;\r\n        }\r\n        catch (e) {\r\n            alert(e);\r\n        }\r\n\r\n        return recvd_resp;\r\n    }\r\n\r\n    // ----------------------------------------------------------------------\r\n\r\n    function parseUrl(str, component) {\r\n        var key = ['source', 'scheme', 'authority', 'userInfo', 'user', 'pass', 'host', 'port',\r\n                'relative', 'path', 'directory', 'file', 'query', 'fragment'],\r\n        ini = {},\r\n        mode = (ini['phpjs.parse_url.mode'] &&\r\n          ini['phpjs.parse_url.mode'].local_value) || 'php',\r\n        parser = {\r\n          php: /^(?:([^:\\/?#]+):)?(?:\\/\\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\\/?#]*)(?::(\\d*))?))?()(?:(()(?:(?:[^?#\\/]*\\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,\r\n          strict: /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*):?([^:@]*))?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,\r\n          loose: /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/\\/?)?((?:(([^:@]*):?([^:@]*))?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/ // Added one optional slash to post-scheme to catch file:/// (should restrict this)\r\n        };\r\n\r\n        var m = parser[mode].exec(str),\r\n        uri = {},\r\n        i = 14;\r\n        while (i--) {\r\n        if (m[i]) {\r\n          uri[key[i]] = m[i];\r\n        }\r\n        }\r\n\r\n        if (component) {\r\n        return uri[component.replace('PHP_URL_', '').toLowerCase()];\r\n        }\r\n        if (mode !== 'php') {\r\n        var name = (ini['phpjs.parse_url.queryKey'] &&\r\n            ini['phpjs.parse_url.queryKey'].local_value) || 'queryKey';\r\n        parser = /(?:^|&)([^&=]*)=?([^&]*)/g;\r\n        uri[name] = {};\r\n        uri[key[12]].replace(parser, function ($0, $1, $2) {\r\n          if ($1) {uri[name][$1] = $2;}\r\n        });\r\n        }\r\n        delete uri.source;\r\n        return uri;\r\n    }\r\n\r\n    // ----------------------------------------------------------------------\r\n\r\n    function getQueryVariable(url, variable) {\r\n        var query = url;\r\n        var vars = query.split('&');\r\n        for (var i = 0; i < vars.length; i++) {\r\n            var pair = vars[i].split('=');\r\n            if (decodeURIComponent(pair[0]) == variable) {\r\n                return decodeURIComponent(pair[1]);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    // ----------------------------------------------------------------------\r\n\r\n    //OAuthSimple Class :)\r\n    //var vimeoConsumerKey = 'be6f5726995c952d80c62fea3bfdacbd92f477ae';\r\n    //var vimeoSharedSecret = '5e082c746fefa4bbad7217d7ca8aef12dae4dab5';\r\n    var vimeoConsumerKey = '1a8a81eaf6658d0dbb955f0386f484c1f9b55ece';\r\n    var vimeoSharedSecret = '2ffac38d1ee9eac6a2389269aa19429a927ff07b';\r\n\r\n    ChannelVideos.OAuthSimple = function (consumer_key, shared_secret) {\r\n        this._secrets = {};\r\n\r\n\r\n        // General configuration options.\r\n        if (consumer_key != null)\r\n            this._secrets['consumer_key'] = consumer_key;\r\n        if (shared_secret != null)\r\n            this._secrets['shared_secret'] = shared_secret;\r\n        this._default_signature_method = \"HMAC-SHA1\";\r\n        this._action = \"GET\";\r\n        this._nonce_chars = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\";\r\n\r\n        /* set the parameters either from a hash or a string\r\n        *\r\n        * @param {string,object} List of parameters for the call, this can either be a URI string (e.g. \"foo=bar&gorp=banana\" or an object/hash)\r\n        */\r\n\r\n        this.setParameters = function (parameters) {\r\n            if (parameters == null)\r\n                parameters = {};\r\n            if (typeof (parameters) == 'string')\r\n                parameters = this._parseParameterString(parameters);\r\n            this._parameters = parameters;\r\n            if (this._parameters['oauth_nonce'] == null)\r\n                this._getNonce();\r\n            if (this._parameters['oauth_timestamp'] == null)\r\n                this._getTimestamp();\r\n            if (this._parameters['oauth_method'] == null)\r\n                this.setSignatureMethod();\r\n            if (this._parameters['oauth_consumer_key'] == null)\r\n                this._getApiKey();\r\n            if (this._parameters['oauth_token'] == null)\r\n                this._getAccessToken();\r\n\r\n            return this;\r\n        };\r\n\r\n        /* convienence method for setParameters\r\n        *\r\n        * @param parameters {string,object} See .setParameters\r\n        */\r\n        this.setQueryString = function (parameters) {\r\n            return this.setParameters(parameters);\r\n        };\r\n\r\n        /* Set the target URL (does not include the parameters)\r\n        *\r\n        * @param path {string} the fully qualified URI (excluding query arguments) (e.g \"http://example.org/foo\")\r\n        */\r\n        this.setURL = function (path) {\r\n            if (path == '')\r\n                throw ('No path specified for OAuthSimple.setURL');\r\n            if (path.indexOf(' ') != -1) {\r\n                $(\"#path\").select();\r\n                throw ('Space detected in request path/URL');\r\n            };\r\n            this._path = path;\r\n            return this;\r\n        };\r\n\r\n        /* convienence method for setURL\r\n        *\r\n        * @param path {string} see .setURL\r\n        */\r\n        this.setPath = function (path) {\r\n            return this.setURL(path);\r\n        };\r\n\r\n        /* set the \"action\" for the url, (e.g. GET,POST, DELETE, etc.)\r\n        *\r\n        * @param action {string} HTTP Action word.\r\n        */\r\n        this.setAction = function (action) {\r\n            if (action == null)\r\n                action = \"GET\";\r\n            action = action.toUpperCase();\r\n            if (action.match('[^A-Z]'))\r\n                throw ('Invalid action specified for OAuthSimple.setAction');\r\n            this._action = action;\r\n            return this;\r\n        };\r\n\r\n        /* set the signatures (as well as validate the ones you have)\r\n        *\r\n        * @param signatures {object} object/hash of the token/signature pairs {api_key:, shared_secret:, oauth_token: oauth_secret:}\r\n        */\r\n        this.setTokensAndSecrets = function (signatures) {\r\n            if (signatures)\r\n                for (var i in signatures)\r\n                    this._secrets[i] = signatures[i];\r\n            // Aliases\r\n            if (this._secrets['api_key'])\r\n                this._secrets.consumer_key = this._secrets.api_key;\r\n            if (this._secrets['access_token'])\r\n                this._secrets.oauth_token = this._secrets.access_token;\r\n            if (this._secrets['access_secret'])\r\n                this._secrets.oauth_secret = this._secrets.access_secret;\r\n            // Gauntlet\r\n            if (this._secrets.consumer_key == null)\r\n                throw ('Missing required consumer_key in OAuthSimple.setTokensAndSecrets');\r\n            if (this._secrets.shared_secret == null)\r\n                throw ('Missing required shared_secret in OAuthSimple.setTokensAndSecrets');\r\n            if ((this._secrets.oauth_token != null) && (this._secrets.oauth_secret == null))\r\n                throw ('Missing oauth_secret for supplied oauth_token in OAuthSimple.setTokensAndSecrets');\r\n            return this;\r\n        };\r\n\r\n        /* set the signature method (currently only Plaintext or SHA-MAC1)\r\n        *\r\n        * @param method {string} Method of signing the transaction (only PLAINTEXT and SHA-MAC1 allowed for now)\r\n        */\r\n        this.setSignatureMethod = function (method) {\r\n            if (method == null)\r\n                method = this._default_signature_method;\r\n            //TODO: accept things other than PlainText or SHA-MAC1\r\n            if (method.toUpperCase().match(/(PLAINTEXT|HMAC-SHA1)/) == null)\r\n                throw ('Unknown signing method specified for OAuthSimple.setSignatureMethod');\r\n            this._parameters['oauth_signature_method'] = method.toUpperCase();\r\n            return this;\r\n        };\r\n\r\n        /* sign the request\r\n        *\r\n        * note: all arguments are optional, provided you've set them using the\r\n        * other helper functions.\r\n        *\r\n        * @param args {object} hash of arguments for the call\r\n        * {action:, path:, parameters:, method:, signatures:}\r\n        * all arguments are optional.\r\n        */\r\n        this.sign = function (args) {\r\n            if (args == null)\r\n                args = {};\r\n            // Set any given parameters\r\n            if (args['action'] != null)\r\n                this.setAction(args['action']);\r\n            if (args['path'] != null)\r\n                this.setPath(args['path']);\r\n            if (args['method'] != null)\r\n                this.setSignatureMethod(args['method']);\r\n            this.setTokensAndSecrets(args['signatures']);\r\n            if (args['parameters'] != null)\r\n                this.setParameters(args['parameters']);\r\n            // check the parameters\r\n            var normParams = this._normalizedParameters();\r\n            var sig = this._generateSignature(normParams);\r\n            this._parameters['oauth_signature'] = sig.signature;\r\n            return {\r\n                parameters: this._parameters,\r\n                sig_string: sig.sig_string,\r\n                signature: this._oauthEscape(this._parameters['oauth_signature']),\r\n                signed_url: this._path + '?' + this._normalizedParameters(),\r\n                header: this.getHeaderString()\r\n            };\r\n        };\r\n\r\n        /* Return a formatted \"header\" string\r\n        *\r\n        * NOTE: This doesn't set the \"Authorization: \" prefix, which is required.\r\n        * I don't set it because various set header functions prefer different\r\n        * ways to do that.\r\n        *\r\n        * @param args {object} see .sign\r\n        */\r\n        this.getHeaderString = function (args) {\r\n            if (this._parameters['oauth_signature'] == null)\r\n                this.sign(args);\r\n\r\n            var result = 'OAuth ';\r\n            for (var pName in this._parameters) {\r\n                if (pName.match(/^oauth/) == null)\r\n                    continue;\r\n                if ((this._parameters[pName]) instanceof Array) {\r\n                    var pLength = this._parameters[pName].length;\r\n                    for (var j = 0; j < pLength; j++) {\r\n                        result += pName + '=\"' + this._oauthEscape(this._parameters[pName][j]) + '\" ';\r\n                    }\r\n                }\r\n                else {\r\n                    result += pName + '=\"' + this._oauthEscape(this._parameters[pName]) + '\" ';\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n\r\n        // Start Private Methods.\r\n\r\n        /* convert the parameter string into a hash of objects.\r\n        *\r\n        */\r\n        this._parseParameterString = function (paramString) {\r\n            var elements = paramString.split('&');\r\n            var result = {};\r\n            for (var element = elements.shift(); element; element = elements.shift()) {\r\n                var keyToken = element.split('=');\r\n                var value;\r\n                if (keyToken[1])\r\n                    value = decodeURIComponent(keyToken[1]);\r\n                if (result[keyToken[0]]) {\r\n                    if (!(result[keyToken[0]] instanceof Array)) {\r\n                        result[keyToken[0]] = Array(result[keyToken[0]], value);\r\n                    }\r\n                    else {\r\n                        result[keyToken[0]].push(value);\r\n                    }\r\n                }\r\n                else {\r\n                    result[keyToken[0]] = value;\r\n                }\r\n            }\r\n            return result;\r\n        };\r\n\r\n        this._oauthEscape = function (string) {\r\n            if (string == null)\r\n                return \"\";\r\n            if (string instanceof Array) {\r\n                throw ('Array passed to _oauthEscape');\r\n            }\r\n            return encodeURIComponent(string).replace(/\\!/g, \"%21\").\r\n            replace(/\\*/g, \"%2A\").\r\n            replace(/'/g, \"%27\").\r\n            replace(/\\(/g, \"%28\").\r\n            replace(/\\)/g, \"%29\");\r\n        };\r\n\r\n        this._getNonce = function (length) {\r\n            if (length == null)\r\n                length = 5;\r\n            var result = \"\";\r\n            var cLength = this._nonce_chars.length;\r\n            for (var i = 0; i < length; i++) {\r\n                var rnum = Math.floor(Math.random() * cLength);\r\n                result += this._nonce_chars.substring(rnum, rnum + 1);\r\n            }\r\n            this._parameters['oauth_nonce'] = result;\r\n            return result;\r\n        };\r\n\r\n        this._getApiKey = function () {\r\n            if (this._secrets.consumer_key == null)\r\n                throw ('No consumer_key set for OAuthSimple.');\r\n            this._parameters['oauth_consumer_key'] = this._secrets.consumer_key;\r\n            return this._parameters.oauth_consumer_key;\r\n        };\r\n\r\n        this._getAccessToken = function () {\r\n            if (this._secrets['oauth_secret'] == null)\r\n                return '';\r\n            if (this._secrets['oauth_token'] == null)\r\n                throw ('No oauth_token (access_token) set for OAuthSimple.');\r\n            this._parameters['oauth_token'] = this._secrets.oauth_token;\r\n            return this._parameters.oauth_token;\r\n        };\r\n\r\n        this._getTimestamp = function () {\r\n            var d = new Date();\r\n            var ts = Math.floor(d.getTime() / 1000);\r\n            this._parameters['oauth_timestamp'] = ts;\r\n            return ts;\r\n        };\r\n\r\n        this._normalizedParameters = function () {\r\n            var elements = new Array();\r\n            var paramNames = [];\r\n            var ra = 0;\r\n\r\n            for (var paramName in this._parameters) {\r\n                if (ra++ > 1000)\r\n                    throw ('runaway 1');\r\n                paramNames.unshift(paramName);\r\n            }\r\n            paramNames = paramNames.sort();\r\n            var pLen = paramNames.length;\r\n            for (var i = 0; i < pLen; i++) {\r\n                paramName = paramNames[i];\r\n                //skip secrets.\r\n                if (paramName.match(/\\w+_secret/))\r\n                    continue;\r\n                if (this._parameters[paramName] instanceof Array) {\r\n                    var sorted = this._parameters[paramName].sort();\r\n                    var spLen = sorted.length;\r\n                    for (var j = 0; j < spLen; j++) {\r\n                        if (ra++ > 1000)\r\n                            throw ('runaway 1');\r\n                        elements.push(this._oauthEscape(paramName) + '=' +\r\n                                  this._oauthEscape(sorted[j]));\r\n                    }\r\n                    continue;\r\n                }\r\n                elements.push(this._oauthEscape(paramName) + '=' +\r\n                              this._oauthEscape(this._parameters[paramName]));\r\n            }\r\n            return elements.join('&');\r\n        };\r\n\r\n        this.b64_hmac_sha1 = function (k, d, _p, _z) {\r\n            // heavily optimized and compressed version of http://pajhome.org.uk/crypt/md5/sha1.js\r\n            // _p = b64pad, _z = character size; not used here but I left them available just in case\r\n            if (!_p) { _p = '='; } if (!_z) { _z = 8; } function _f(t, b, c, d) { if (t < 20) { return (b & c) | ((~b) & d); } if (t < 40) { return b ^ c ^ d; } if (t < 60) { return (b & c) | (b & d) | (c & d); } return b ^ c ^ d; } function _k(t) { return (t < 20) ? 1518500249 : (t < 40) ? 1859775393 : (t < 60) ? -1894007588 : -899497514; } function _s(x, y) { var l = (x & 0xFFFF) + (y & 0xFFFF), m = (x >> 16) + (y >> 16) + (l >> 16); return (m << 16) | (l & 0xFFFF); } function _r(n, c) { return (n << c) | (n >>> (32 - c)); } function _c(x, l) { x[l >> 5] |= 0x80 << (24 - l % 32); x[((l + 64 >> 9) << 4) + 15] = l; var w = [80], a = 1732584193, b = -271733879, c = -1732584194, d = 271733878, e = -1009589776; for (var i = 0; i < x.length; i += 16) { var o = a, p = b, q = c, r = d, s = e; for (var j = 0; j < 80; j++) { if (j < 16) { w[j] = x[i + j]; } else { w[j] = _r(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1); } var t = _s(_s(_r(a, 5), _f(j, b, c, d)), _s(_s(e, w[j]), _k(j))); e = d; d = c; c = _r(b, 30); b = a; a = t; } a = _s(a, o); b = _s(b, p); c = _s(c, q); d = _s(d, r); e = _s(e, s); } return [a, b, c, d, e]; } function _b(s) { var b = [], m = (1 << _z) - 1; for (var i = 0; i < s.length * _z; i += _z) { b[i >> 5] |= (s.charCodeAt(i / 8) & m) << (32 - _z - i % 32); } return b; } function _h(k, d) { var b = _b(k); if (b.length > 16) { b = _c(b, k.length * _z); } var p = [16], o = [16]; for (var i = 0; i < 16; i++) { p[i] = b[i] ^ 0x36363636; o[i] = b[i] ^ 0x5C5C5C5C; } var h = _c(p.concat(_b(d)), 512 + d.length * _z); return _c(o.concat(h), 512 + 160); } function _n(b) { var t = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\", s = ''; for (var i = 0; i < b.length * 4; i += 3) { var r = (((b[i >> 2] >> 8 * (3 - i % 4)) & 0xFF) << 16) | (((b[i + 1 >> 2] >> 8 * (3 - (i + 1) % 4)) & 0xFF) << 8) | ((b[i + 2 >> 2] >> 8 * (3 - (i + 2) % 4)) & 0xFF); for (var j = 0; j < 4; j++) { if (i * 8 + j * 6 > b.length * 32) { s += _p; } else { s += t.charAt((r >> 6 * (3 - j)) & 0x3F); } } } return s; } function _x(k, d) { return _n(_h(k, d)); } return _x(k, d);\r\n        };\r\n\r\n        this._generateSignature = function () {\r\n\r\n            var secretKey = this._oauthEscape(this._secrets.shared_secret) + '&' +\r\n                this._oauthEscape(this._secrets.oauth_secret);\r\n            if (this._parameters['oauth_signature_method'] == 'PLAINTEXT') {\r\n                return { sig_string: null, signature: secretKey };\r\n            }\r\n            if (this._parameters['oauth_signature_method'] == 'HMAC-SHA1') {\r\n                var sigString = this._oauthEscape(this._action) + '&' + this._oauthEscape(this._path) + '&' + this._oauthEscape(this._normalizedParameters());\r\n                return { 'sig_string': sigString, 'signature': this.b64_hmac_sha1(secretKey, sigString) };\r\n            }\r\n            return null;\r\n        };\r\n\r\n        return this;\r\n    };\r\n\r\n    /* --------------------------------End of Simple OAuth Class------------------------------------- */\r\n\r\n\r\n}(window, jQuery));\r\n\r\n//********************************************************************************* //\r\n\r\n/*\r\n * Shared and maintained by [Nezasa](http://www.nezasa.com)\r\n * Published under [Apache 2.0 license](http://www.apache.org/licenses/LICENSE-2.0.html)\r\n * © Nezasa, 2012-2013\r\n *\r\n * ---\r\n *\r\n * Javascript library for parsing of ISO 8601 durations. Supported are durations of\r\n * the form P3Y6M4DT12H30M17S or PT1S or P1Y4DT1H3S etc.\r\n *\r\n * @author Nezasa AG -- https://github.com/nezasa\r\n * @contributor Jason \"Palamedes\" Ellis -- https://github.com/palamedes\r\n */\r\n\r\n(function( nezasa, undefined ) {\r\n\r\n    // create sub packages\r\n    if (!nezasa.iso8601) nezasa.iso8601 = {};\r\n    if (!nezasa.iso8601.Period) nezasa.iso8601.Period = {};\r\n\r\n    //---- public properties\r\n\r\n    /**\r\n     * version of the ISO8601 version\r\n     */\r\n    nezasa.iso8601.version = '0.2';\r\n\r\n    //---- public methods\r\n\r\n    /**\r\n     * Returns an array of the duration per unit. The normalized sum of all array elements\r\n     * represents the total duration.\r\n     *\r\n     * - array[0]: years\r\n     * - array[1]: months\r\n     * - array[2]: weeks\r\n     * - array[3]: days\r\n     * - array[4]: hours\r\n     * - array[5]: minutes\r\n     * - array[6]: seconds\r\n     *\r\n     * @param period iso8601 period string\r\n     * @param distributeOverflow if 'true', the unit overflows are merge into the next higher units. Defaults to 'false'.\r\n     */\r\n    nezasa.iso8601.Period.parse = function(period, distributeOverflow) {\r\n        return parsePeriodString(period, distributeOverflow);\r\n    };\r\n\r\n    /**\r\n     * Returns the total duration of the period in seconds.\r\n     */\r\n    nezasa.iso8601.Period.parseToTotalSeconds = function(period) {\r\n\r\n        var multiplicators = [31104000 /* year   (360*24*60*60) */,\r\n            2592000  /* month  (30*24*60*60) */,\r\n            604800   /* week   (24*60*60*7) */,\r\n            86400    /* day    (24*60*60) */,\r\n            3600     /* hour   (60*60) */,\r\n            60       /* minute (60) */,\r\n            1        /* second (1) */];\r\n        var durationPerUnit = parsePeriodString(period);\r\n        var durationInSeconds = 0;\r\n\r\n        for (var i = 0; i < durationPerUnit.length; i++) {\r\n            durationInSeconds += durationPerUnit[i] * multiplicators[i];\r\n        }\r\n\r\n        return durationInSeconds;\r\n    };\r\n\r\n    /**\r\n     * Return boolean based on validity of period\r\n     * @param period\r\n     * @return {Boolean}\r\n     */\r\n    nezasa.iso8601.Period.isValid = function(period) {\r\n        try {\r\n            parsePeriodString(period);\r\n            return true;\r\n        } catch(e) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns a more readable string representation of the ISO8601 period.\r\n     * @param period the ISO8601 period string\r\n     * @param unitName the names of the time units if there is only one (such as hour or minute).\r\n     *        Defaults to ['year', 'month', 'week', 'day', 'hour', 'minute', 'second'].\r\n     * @param unitNamePlural thenames of the time units if there are several (such as hours or minutes).\r\n     *        Defaults to ['years', 'months', 'weeks', 'days', 'hours', 'minutes', 'seconds'].\r\n     * @param distributeOverflow if 'true', the unit overflows are merge into the next higher units. Defaults to 'false'.\r\n     */\r\n    nezasa.iso8601.Period.parseToString = function(period, unitNames, unitNamesPlural, distributeOverflow) {\r\n\r\n        var result = ['', '', '', '', '', '', ''];\r\n        var durationPerUnit = parsePeriodString(period, distributeOverflow);\r\n\r\n        // input validation (use english as default)\r\n        if (!unitNames)       unitNames       = ['year', 'month', 'week', 'day', 'hour', 'minute', 'second'];\r\n        if (!unitNamesPlural) unitNamesPlural = ['years', 'months', 'weeks', 'days', 'hours', 'minutes', 'seconds'];\r\n\r\n        // assemble string per unit\r\n        for (var i = 0; i < durationPerUnit.length; i++) {\r\n            if (durationPerUnit[i] > 0) {\r\n                if   (durationPerUnit[i] == 1) result[i] = durationPerUnit[i] + \" \" + unitNames[i];\r\n                else                           result[i] = durationPerUnit[i] + \" \" + unitNamesPlural[i];\r\n            }\r\n        }\r\n\r\n        // trim because of space at very end and because of join(\" \")\r\n        // replace double spaces because of join(\" \") and empty strings\r\n        // Its actually possible to get more than 2 spaces in a row,\r\n        //   so lets get 2+ spaces and remove them\r\n        return result.join(' ').trim().replace(/[ ]{2,}/g,' ');\r\n    };\r\n\r\n    //---- private methods\r\n\r\n    /**\r\n     * Parses a ISO8601 period string.\r\n     * @param period iso8601 period string\r\n     * @param _distributeOverflow if 'true', the unit overflows are merge into the next higher units.\r\n     */\r\n    function parsePeriodString(period, _distributeOverflow) {\r\n\r\n        // regex splits as follows\r\n        // grp0 omitted as it is equal to the sample\r\n        //\r\n        // | sample            | grp1   | grp2 | grp3 | grp4 | grp5 | grp6       | grp7 | grp8 | grp9 |\r\n        // --------------------------------------------------------------------------------------------\r\n        // | P1Y2M3W           | 1Y2M3W | 1Y   | 2M   | 3W   | 4D   | T12H30M17S | 12H  | 30M  | 17S  |\r\n        // | P3Y6M4DT12H30M17S | 3Y6M4D | 3Y   | 6M   |      | 4D   | T12H30M17S | 12H  | 30M  | 17S  |\r\n        // | P1M               | 1M     |      | 1M   |      |      |            |      |      |      |\r\n        // | PT1M              | 3Y6M4D |      |      |      |      | T1M        |      | 1M   |      |\r\n        // --------------------------------------------------------------------------------------------\r\n\r\n        var distributeOverflow = (_distributeOverflow) ? _distributeOverflow : false;\r\n        var valueIndexes       = [2, 3, 4, 5, 7, 8, 9];\r\n        var duration           = [0, 0, 0, 0, 0, 0, 0];\r\n        var overflowLimits     = [0, 12, 4, 7, 24, 60, 60];\r\n        var struct;\r\n\r\n        // upcase the string just in case people don't follow the letter of the law\r\n        period = period.toUpperCase();\r\n\r\n        // input validation\r\n        if (!period)                         return duration;\r\n        else if (typeof period !== \"string\") throw new Error(\"Invalid iso8601 period string '\" + period + \"'\");\r\n\r\n        // parse the string\r\n        if (struct = /^P((\\d+Y)?(\\d+M)?(\\d+W)?(\\d+D)?)?(T(\\d+H)?(\\d+M)?(\\d+S)?)?$/.exec(period)) {\r\n\r\n            // remove letters, replace by 0 if not defined\r\n            for (var i = 0; i < valueIndexes.length; i++) {\r\n                var structIndex = valueIndexes[i];\r\n                duration[i] = struct[structIndex] ? +struct[structIndex].replace(/[A-Za-z]+/g, '') : 0;\r\n            }\r\n        }\r\n        else {\r\n            throw new Error(\"String '\" + period + \"' is not a valid ISO8601 period.\");\r\n        }\r\n\r\n        if (distributeOverflow) {\r\n            // note: stop at 1 to ignore overflow of years\r\n            for (var i = duration.length - 1; i > 0; i--) {\r\n                if (duration[i] >= overflowLimits[i]) {\r\n                    duration[i-1] = duration[i-1] + Math.floor(duration[i]/overflowLimits[i]);\r\n                    duration[i] = duration[i] % overflowLimits[i];\r\n                }\r\n            }\r\n        }\r\n\r\n        return duration;\r\n    };\r\n\r\n\r\n}( window.nezasa = window.nezasa || {} ));\r\n\r\n//********************************************************************************* //\r\n\r\n\r\n$(document).ready(function() {\r\n\r\n    ChannelVideos.Init();\r\n});\r\n\r\n//********************************************************************************* //\r\n"]}